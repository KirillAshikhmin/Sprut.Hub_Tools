{
  "scenarioTemplate": {
    "name": "BatteryMonitoring.Global",
    "desc": "",
    "active": true,
    "onStart": true,
    "sync": false,
    "data": "/**\n * –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±–∞—Ç–∞—Ä–µ–π –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–¥–∫—É\n * @param {Boolean} fullInfo - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–≤–∫–ª—é—á–∞—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –Ω–æ—Ä–º–µ –∏ –±–µ–∑ –ª–æ–≥–∏–∫–∏)\n * @param {Array} blackList - –°–ø–∏—Å–æ–∫ ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏\n * @param {Array} whiteList - –°–ø–∏—Å–æ–∫ ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ –ø—Ä–æ–≤–µ—Ä–∫—É (–µ—Å–ª–∏ –ø—É—Å—Ç–æ–π, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ)\n * @param {String} notificationChannel - –ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"Telegram_1\", \"Web_1\")\n * @param {String} notificationClients - –°—Ç—Ä–æ–∫–∞ —Å ID –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"1, 3, 4\")\n * @param {Boolean} silentNotification - –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –∑–≤—É–∫–∞\n */\nfunction getBatteriesInfo(fullInfo, blackList, whiteList, notificationChannel, notificationClients, silentNotification) {\n    // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n    var defaultFullInfo = false;                    // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–≤–∫–ª—é—á–∞—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –Ω–æ—Ä–º–µ –∏ –±–µ–∑ –ª–æ–≥–∏–∫–∏) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä—è–∂–µ–Ω–Ω—ã–µ –±–∞—Ç–∞—Ä–µ–∏\n    var defaultBlackList = [];                      // –°–ø–∏—Å–æ–∫ ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –∏—Å–∫–ª—é—á–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n    var defaultWhiteList = [];                      // –°–ø–∏—Å–æ–∫ ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ –ø—Ä–æ–≤–µ—Ä–∫—É (–µ—Å–ª–∏ –ø—É—Å—Ç–æ–π, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤—Å–µ) - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n    var defaultNotificationChannel = \"Telegram_1\";            // –ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"Telegram_1\", \"Web_1\") - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–Ω–∞–ª –Ω–µ —É–∫–∞–∑–∞–Ω\n    var defaultNotificationClients = \"1\";            // –°—Ç—Ä–æ–∫–∞ —Å ID –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"1, 3, 4\") - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞\n    var defaultSilentNotification = false;          // –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –∑–≤—É–∫–∞ - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –∑–≤—É–∫–æ–º\n\n    const blackListAccessories = [];\n    const whiteListAccessories = [];\n\n    // –°–ª–∏—è–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n    var actualFullInfo = fullInfo !== undefined ? fullInfo : defaultFullInfo;\n    var actualBlackList = blackList !== undefined ? blackList : defaultBlackList;\n    var actualWhiteList = whiteList !== undefined ? whiteList : defaultWhiteList;\n    var actualNotificationChannel = notificationChannel !== undefined ? notificationChannel : defaultNotificationChannel;\n    var actualNotificationClients = notificationClients !== undefined ? notificationClients : defaultNotificationClients;\n    var actualSilentNotification = silentNotification !== undefined ? silentNotification : defaultSilentNotification;\n\n    let states = GlobalVariables[\"batteryStateScenario\"]\n    if (!states) GlobalVariables[\"batteryStateScenario\"] = []\n\n    let black = blackListAccessories\n    let white = whiteListAccessories\n    if (Array.isArray(actualBlackList)) { actualBlackList.forEach(function (i) { black.push(i) }) } else if (actualBlackList != undefined && actualBlackList.length > 0) black.push(actualBlackList)\n    if (Array.isArray(actualWhiteList)) { actualWhiteList.forEach(function (i) { white.push(i) }) } else if (actualWhiteList != undefined && actualWhiteList.length > 0) white.push(actualWhiteList)\n\n    let withLowBattery = []\n    let normalBattery = []\n    let withoutLogic = []\n    let batteries = {};\n    Hub.getAccessories().forEach(function (accessory) {\n        const uuid = accessory.getUUID()\n        if (white.length > 0 && white.indexOf(uuid) < 0) return\n        if (black.indexOf(uuid) >= 0) return\n        let service = accessory.getService(HS.BatteryService)\n        if (service == null) return\n        let state = GlobalVariables[\"batteryStateScenario\"][uuid]\n        if (state == undefined) {\n            const level = service.getCharacteristic(HC.BatteryLevel).getValue()\n            const charging = service.getCharacteristic(HC.ChargingState).getValue() == 1\n            const lowBattery = service.getCharacteristic(HC.StatusLowBattery).getValue()\n\n            state = {\n                uuid: uuid,\n                name: accessory.getName(),\n                room: accessory.getRoom().getName(),\n                manufacturer: accessory.getManufacturer(),\n                model: accessory.getModel(),\n                level: level,\n                lowBattery: lowBattery,\n                charging: charging,\n                logicEnabled: false\n            }\n        } else {\n            state.logicEnabled = true\n        }\n\n        if (state.lowBattery) withLowBattery.push(state)\n        else normalBattery.push(state)\n        if (state.logicEnabled != true) withoutLogic.push(state)\n        if (state.lowBattery && state.batteryType != undefined && state.batteryType != \"\") {\n            let count = batteries[state.batteryType]\n            if (count == undefined) count = state.quantity\n            else count += state.quantity\n            batteries[state.batteryType] = count\n        }\n\n    })\n    GlobalVariables.batteriesForChange = batteries\n\n    withLowBattery = withLowBattery.sort(function (a, b) { return a.room.localeCompare(b.room); })\n    normalBattery = normalBattery.sort(function (a, b) { return a.room.localeCompare(b.room); })\n    withoutLogic = withoutLogic.sort(function (a, b) { return a.room.localeCompare(b.room); })\n\n    let hasWithLowBattery = withLowBattery.length > 0\n    \n    // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞–Ω–∞–ª–∞\n    let message = formatBatterySummaryMessage(withLowBattery, normalBattery, withoutLogic, batteries, actualFullInfo, actualNotificationChannel)\n    \n    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤\n    let clientsArray = []\n    if (actualNotificationClients && actualNotificationClients.trim() !== \"\") {\n        clientsArray = actualNotificationClients.split(',').map(client => client.trim()).filter(client => client !== \"\")\n    }\n    \n    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n    sendNotification(\n        message,\n        actualNotificationChannel,\n        clientsArray,\n        actualSilentNotification\n    )\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–≤–æ–¥–∫–∏ –ø–æ –±–∞—Ç–∞—Ä–µ—è–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞–Ω–∞–ª–∞\n * @param {Array} withLowBattery - –ú–∞—Å—Å–∏–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å —Ä–∞–∑—Ä—è–∂–µ–Ω–Ω—ã–º–∏ –±–∞—Ç–∞—Ä–µ—è–º–∏\n * @param {Array} normalBattery - –ú–∞—Å—Å–∏–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º–∏ –±–∞—Ç–∞—Ä–µ—è–º–∏\n * @param {Array} withoutLogic - –ú–∞—Å—Å–∏–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –±–µ–∑ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏\n * @param {Object} batteries - –û–±—ä–µ–∫—Ç —Å —Ç–∏–ø–∞–º–∏ –±–∞—Ç–∞—Ä–µ–π –¥–ª—è –∑–∞–º–µ–Ω—ã\n * @param {Boolean} fullInfo - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é\n * @param {String} channel - –ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\n * @returns {String} –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n */\nfunction formatBatterySummaryMessage(withLowBattery, normalBattery, withoutLogic, batteries, fullInfo, channel) {\n    if (channel && channel.startsWith(\"Telegram\")) {\n        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Telegram - —Å—Ä–∞–∑—É —Å—Ç—Ä–æ–∫–∞\n        let text = \"*üîã –°–æ—Å—Ç–æ—è–Ω–∏–µ –±–∞—Ç–∞—Ä–µ–π:*\\n\"\n        \n        if (withLowBattery.length > 0) {\n            text += \"‚ùóÔ∏è *–†–∞–∑—Ä—è–∂–µ–Ω—ã:*\\n\"\n            withLowBattery.forEach(function (state) {\n                text += formatStateToTgString(state) + \"\\n\"\n            })\n\n            let batKeys = Object.keys(batteries)\n            if (batKeys.length > 0) {\n                text += \"\\nüîã  *–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∑–∞–º–µ–Ω—ã:*\\n\"\n                batKeys.forEach(function (type) {\n                    text += type + \" \" + batteries[type] + \" —à—Ç.\\n\"\n                })\n            }\n        } else {\n            if (!fullInfo) text += \"–í—Å–µ –±–∞—Ç–∞—Ä–µ–∏ –∑–∞—Ä—è–∂–µ–Ω—ã\\n\"\n        }\n        \n        if (fullInfo) {\n            if (normalBattery.length > 0 && withoutLogic.length > 0 && withLowBattery.length > 0) {\n                text += \"\\n####################################\\n\\n\"\n            }\n            if (normalBattery.length > 0) {\n                text += \"üëå *–í –Ω–æ—Ä–º–µ:*\\n\"\n                normalBattery.forEach(function (state) {\n                    text += formatStateToTgString(state, true) + \"\\n\"\n                })\n            }\n\n            if (withoutLogic.length > 0) {\n                text += \"\\nü´µ *–£—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –±–µ–∑ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏:*\\n\"\n                withoutLogic.forEach(function (state) {\n                    text += formatStateToTgString(state, true, true) + \"\\n\"\n                })\n            }\n        }\n        \n        return text\n    } else {\n        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–∞–Ω–∞–ª–æ–≤\n        let text = \"\"\n        if (withLowBattery.length > 0) {\n            text += \"üîã‚ùóÔ∏è –†–∞–∑—Ä—è–∂—ë–Ω–Ω—ã–µ –±–∞—Ç–∞—Ä–µ–∏: \"\n            withLowBattery.forEach(function (state) {\n                text += formatStateToInfo(state)\n            })\n\n            let batKeys = Object.keys(batteries)\n            if (batKeys.length > 0) {\n                text += \"üîã –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∑–∞–º–µ–Ω—ã: \"\n                batKeys.forEach(function (type) {\n                    text += type + \" \" + batteries[type] + \" —à—Ç. \"\n                })\n            }\n        }\n        if (text == \"\") text = \"–í—Å–µ –±–∞—Ç–∞—Ä–µ–∏ –∑–∞—Ä—è–∂–µ–Ω—ã\"\n        \n        return text\n    }\n}\n\nfunction formatStateToInfo(state) {\n    return state.room + \" -> \" + state.name +\n        (state.placement != \"\" && state.placement != undefined ? \". \" + state.placement.trim() : \"\") + \" (ID: \" + state.uuid + \")\" +\n        \" \" + state.level + \"% | \"\n}\n\nfunction formatStateToTg(textArray, state, compact, noShowLevel) {\n    if (compact == true) {\n        textArray.push(\n            state.room + \" -> \" + state.name +\n            (state.placement != \"\" && state.placement != undefined ? \". \" + state.placement.trim() : \"\") + \" (ID: \" + state.uuid + \")\" +\n            (!noShowLevel ? (\" *\" + state.level + \"%*\") : \"\")\n        )\n    } else {\n        textArray.push(state.room + \" -> \" + state.name + \" (ID: \" + state.uuid + \")\")\n        if (state.placement != undefined && state.placement != \"\") textArray.push(state.placement.trim())\n        textArray.push(\"–ó–∞—Ä—è–¥: \" + state.level + \"%\")\n        if (state.batteryType != undefined && state.batteryType != \"\" && state.batteryType != \"-\") textArray.push(\"–¢–∏–ø: \" + state.batteryType + \" (\" + state.quantity + \" —à—Ç.)\")\n        if (state.chargingType != undefined && state.chargingType != \"\" && state.chargingType != \"-\") textArray.push(\"–ó–∞—Ä—è–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑: \" + state.chargingType + \" \")\n        if (state.comment != undefined && state.comment != \"\") textArray.push(state.comment.trim())\n        if (state.date != undefined) textArray.push(\"–î–∞—Ç–∞ \" + (state.chargingType != \"\" ? \"–∑–∞—Ä—è–¥–∫–∏\" : \"–∑–∞–º–µ–Ω—ã –±–∞—Ç–∞—Ä–µ–∏\") + \": \" + state.date.replaceAll(\"-\", \".\"))\n        if (state.logicEnabled != true) textArray.push(\"–õ–æ–≥–∏–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞\")\n        textArray.push(\"\")\n    }\n}\n\n/**\n * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è Telegram\n * @param {Object} state - –û–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n * @param {Boolean} compact - –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º\n * @param {Boolean} noShowLevel - –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –∑–∞—Ä—è–¥–∞\n * @returns {String} –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞\n */\nfunction formatStateToTgString(state, compact, noShowLevel) {\n    if (compact == true) {\n        return state.room + \" -> \" + state.name +\n            (state.placement != \"\" && state.placement != undefined ? \". \" + state.placement.trim() : \"\") + \" (ID: \" + state.uuid + \")\" +\n            (!noShowLevel ? (\" *\" + state.level + \"%*\") : \"\")\n    } else {\n        let result = state.room + \" -> \" + state.name + \" (ID: \" + state.uuid + \")\\n\"\n        if (state.placement != undefined && state.placement != \"\") result += state.placement.trim() + \"\\n\"\n        result += \"–ó–∞—Ä—è–¥: \" + state.level + \"%\\n\"\n        if (state.batteryType != undefined && state.batteryType != \"\" && state.batteryType != \"-\") result += \"–¢–∏–ø: \" + state.batteryType + \" (\" + state.quantity + \" —à—Ç.)\\n\"\n        if (state.chargingType != undefined && state.chargingType != \"\" && state.chargingType != \"-\") result += \"–ó–∞—Ä—è–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑: \" + state.chargingType + \" \\n\"\n        if (state.comment != undefined && state.comment != \"\") result += state.comment.trim() + \"\\n\"\n        if (state.date != undefined) result += \"–î–∞—Ç–∞ \" + (state.chargingType != \"\" ? \"–∑–∞—Ä—è–¥–∫–∏\" : \"–∑–∞–º–µ–Ω—ã –±–∞—Ç–∞—Ä–µ–∏\") + \": \" + state.date.replaceAll(\"-\", \".\") + \"\\n\"\n        if (state.logicEnabled != true) result += \"–õ–æ–≥–∏–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞\\n\"\n        \n        return result\n    }\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Notify\n * @param {String} message - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏\n * @param {String} channel - –ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"Telegram_1\", \"Web_1\")\n * @param {Array} clients - –ú–∞—Å—Å–∏–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤\n * @param {Boolean} silent - –§–ª–∞–≥ —Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞\n */\nfunction sendNotification(message, channel, clients, silent) {\n    try {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç—ã, —Ç–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–¥–∞–Ω –∫–∞–Ω–∞–ª\n        if (clients && clients.length > 0 && (!channel || channel.trim() === \"\")) {\n            log.error(\"BatteryMonitoring: –ó–∞–¥–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç—ã, –Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω –∫–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\")\n            return\n        }\n\n        // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n        let notify = Notify.text(message)\n            .debugText(\"BatteryMonitoring\")\n\n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n        if (silent) {\n            notify = notify.silent(true)\n        }\n\n        // –ï—Å–ª–∏ –∑–∞–¥–∞–Ω—ã –∏ –∫–∞–Ω–∞–ª, –∏ –∫–ª–∏–µ–Ω—Ç—ã, —Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–¥—Ä–µ—Å–∞—Ç–æ–≤\n        if (channel && channel.trim() !== \"\" && clients && clients.length > 0) {\n            // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É, —Ç–∞–∫ –∫–∞–∫ spread operator –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\n            clients.forEach(function(client) {\n                notify = notify.to(channel, client)\n            })\n        }\n\n        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n        notify.send()\n    } catch (e) {\n        log.error(\"BatteryMonitoring: –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: \" + e.message)\n    }\n}",
    "type": "GLOBAL"
  }
}