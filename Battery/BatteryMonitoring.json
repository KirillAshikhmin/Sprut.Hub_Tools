{
  "scenarioTemplate": {
    "name": "üîã –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞—Ç–∞—Ä–µ–µ–∫",
    "desc": "–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –±–∞—Ç–∞—Ä–µ–π–∫–∏ —Ä–∞–∑—Ä—è–¥–∏—Ç—Å—è. –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –±—É–¥–µ—Ç –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —É–∫–∞–∑–∞–Ω–Ω–∞—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è: https://t.me/smart_sputnik",
    "active": true,
    "onStart": true,
    "sync": false,
    "data": "// –¢–∏–ø—ã –±–∞—Ç–∞—Ä–µ–π\nlet batteryTypes = [\"AA\", \"AAA\", \"CR2032\", \"CR2450\", \"CR2025\", \"CR1632\", \"CR3032\", \"CR2477\", \"AG1\", \"AG3\", \"ER14250\", \"2CR5\", \"18650\", \"14500\", \"16340\", \"CR-P2\", \"SR44\", \"3LR12\", \"CR17450\"];\n// –¢–∏–ø—ã –∑–∞—Ä—è–¥–∫–∏\nlet chargingTypes = [\"USB Type-C\", \"Micro USB\", \"Mini USB\", \"Lightning\", \"5521 12V\", \"5525 12V\", \"5521 9V\", \"5525 9V\", \"–°–æ–ª–Ω–µ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å\", \"–ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–µ –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ\"]\n\n// –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∏–∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ –±—ã –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –∏—Ö –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\nconst DEFAULT_NOTIFICATION_CHANNEL = \"Telegram_1\"; // –ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, Telegram_1, Web_1), –∏–ª–∏ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ, —á—Ç–æ –±—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –ø–æ –≤—Å–µ–º –∫–∞–Ω–∞–ª–∞–º\nconst DEFAULT_NOTIFICATION_CLIENTS = \"1\"; // –ö–ª–∏–µ–Ω—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∫–æ—Ç–æ—Ä—ã–º –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1, 3, 4)\nconst DEFAULT_SILENT_NOTIFICATION = false; // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏—Ö–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ. true - —Ç–∏—Ö–∏–µ, false - —Å–æ –∑–≤—É–∫–æ–º\n\ninfo = {\n    name: \"üîã –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞—Ç–∞—Ä–µ–µ–∫\",\n    description: \"–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –±–∞—Ç–∞—Ä–µ–π–∫–∏ —Ä–∞–∑—Ä—è–¥–∏—Ç—Å—è. –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –±—É–¥–µ—Ç –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —É–∫–∞–∑–∞–Ω–Ω–∞—è –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è: https://t.me/smart_sputnik\",\n    version: \"2.0\",\n    author: \"@BOOMikru\",\n    onStart: true,\n\n    sourceServices: [HS.BatteryService],\n    sourceCharacteristics: [HC.StatusLowBattery, HC.BatteryLevel, HC.ChargingState],\n\n    options: {\n        type: {\n            name: {\n                en: \"Battery type\",\n                ru: \"–¢–∏–ø –±–∞—Ç–∞—Ä–µ–∏\"\n            },\n            type: \"String\",\n            value: \"\",\n            formType: \"list\",\n            values: getBatteryTypesList()\n        },\n        quantity: {\n            name: {\n                en: \"Quantity\",\n                ru: \"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞—Ç–∞—Ä–µ–π\"\n            },\n            type: \"Integer\",\n            value: 1\n        },\n        chargingType: {\n            name: {\n                en: \"Charging type\",\n                ru: \"–¢–∏–ø –∑–∞—Ä—è–¥–∫–∏\"\n            },\n            type: \"String\",\n            value: \"\",\n            formType: \"list\",\n            values: getChargingTypesList()\n        },\n        placement: {\n            name: {\n                en: \"Placement\",\n                ru: \"–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ\"\n            },\n            type: \"String\",\n            value: \"\",\n        },\n        comment: {\n            name: {\n                en: \"Comment\",\n                ru: \"–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π\"\n            },\n            type: \"String\",\n            value: \"\",\n        },\n        specificThreshold: {\n            name: {\n                en: \"Specific threshold\",\n                ru: \"–°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∑–∞—Ä—è–¥–∞\"\n            },\n            desc: {\n                en: \"Or use BatteryLevel characteristic\",\n                ru: \"–ò–ª–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ë–∞—Ç–∞—Ä–µ—è —Ä–∞–∑—Ä—è–∂–µ–Ω–∞\"\n            },\n            type: \"Boolean\",\n            value: false\n        },\n        threshold: {\n            name: {\n                en: \"Threshold\",\n                ru: \"–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞—Ä—è–¥ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\"\n            },\n            type: \"Integer\",\n            value: 20,\n            unit: \"%\"\n        },\n        changeName: {\n            name: {\n                en: \"Change name to date\",\n                ru: \"–ú–µ–Ω—è—Ç—å –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –¥–∞—Ç—É –∑–∞–º–µ–Ω—ã –±–∞—Ç–∞—Ä–µ–∏\"\n            },\n            desc: {\n                en: \"No replacement date, if disable\",\n                ru: \"–ï—Å–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–æ, —Ç–æ –¥–∞—Ç–∞ –∑–∞–º–µ–Ω—ã –±–∞—Ç–∞—Ä–µ–∏\\–∑–∞—Ä—è–¥–∫–∏ –Ω–µ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è\"\n            },\n            type: \"Boolean\",\n            value: true\n        },\n        notificationChannel: {\n            name: {\n                en: \"Notification channel\",\n                ru: \"–ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\"\n            },\n            desc: {\n                en: \"Channel identifier for notifications (e.g., Telegram_1, Web_1), or empty field, to send notifications to all channels\",\n                ru: \"–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, Telegram_1, Web_1), –∏–ª–∏ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ, —á—Ç–æ –±—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –ø–æ –≤—Å–µ–º –∫–∞–Ω–∞–ª–∞–º\"\n            },\n            type: \"String\",\n            value: DEFAULT_NOTIFICATION_CHANNEL\n        },\n        notificationClients: {\n            name: {\n                en: \"Notification clients\",\n                ru: \"–ö–ª–∏–µ–Ω—Ç—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\"\n            },\n            desc: {\n                en: \"Client identifiers separated by commas (e.g., 1, 3, 4)\",\n                ru: \"–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1, 3, 4)\"\n            },\n            type: \"String\",\n            value: DEFAULT_NOTIFICATION_CLIENTS\n        },\n        silentNotification: {\n            name: {\n                en: \"Silent notification\",\n                ru: \"–¢–∏—Ö–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\"\n            },\n            desc: {\n                en: \"Send notification without sound\",\n                ru: \"–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –±–µ–∑ –∑–≤—É–∫–∞\"\n            },\n            type: \"Boolean\",\n            value: DEFAULT_SILENT_NOTIFICATION\n        },\n    },\n    variables: {\n        notificationSend: false\n    }\n}\n\nconst dateRegEx = /(\\d{2}-\\d{2}-\\d{4})/\nfunction trigger(source, value, variables, options) {\n    try {\n        if (options.specificThreshold && (options.threshold < 0 || options.threshold > 100)) {\n            log.error(\"–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞—Ä—è–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 0 –¥–æ 100%\")\n            return\n        }\n\n        const service = source.getService()\n        const accessory = source.getAccessory()\n        const uuid = accessory.getUUID()\n        const quantity = options.quantity == undefined ? 1 : options.quantity\n        const level = service.getCharacteristic(HC.BatteryLevel).getValue()\n        const charging = service.getCharacteristic(HC.ChargingState).getValue() == 1\n        let lowBattery = false\n        if (options.specificThreshold) {\n            lowBattery = level <= options.threshold\n        } else {\n            lowBattery = service.getCharacteristic(HC.StatusLowBattery).getValue()\n        }\n\n        let states = GlobalVariables[\"batteryStateScenario\"]\n        if (!states) GlobalVariables[\"batteryStateScenario\"] = []\n        let lastState = states ? GlobalVariables[\"batteryStateScenario\"][uuid] : undefined\n\n        let name = service.getName()\n        var hasDate = dateRegEx.exec(name)\n        let date = hasDate != null ? hasDate[0] : getCurrentDateString()\n\n        if (hasDate && lastState) {\n            if (level == 100 && lastState.level < 100) date = getCurrentDateString()\n            if (!charging && lastState.charging) date = getCurrentDateString()\n        }\n\n        const state = {\n            uuid: uuid,\n            name: accessory.getName(),\n            room: accessory.getRoom().getName(),\n            manufacturer: accessory.getManufacturer(),\n            model: accessory.getModel(),\n            level: level,\n            lowBattery: lowBattery,\n            charging: charging,\n            batteryType: options.type,\n            quantity: quantity,\n            chargingType: options.chargingType,\n            placement: options.placement,\n            comment: options.comment,\n            date: options.changeName ? date : undefined,\n            logicEnabled: true,\n            changeName: options.changeName\n        }\n\n        GlobalVariables[\"batteryStateScenario\"][uuid] = state\n\n\n        if (lowBattery && !charging) {\n\n            if (!variables.notificationSend) {\n                variables.notificationSend = true\n                \n                // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞–Ω–∞–ª–∞\n                let message = formatNotificationMessage(state, date, options.notificationChannel)\n                \n                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫—É –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤\n                let clientsArray = []\n                if (options.notificationClients && options.notificationClients.trim() !== \"\") {\n                    clientsArray = options.notificationClients.split(',').map(client => client.trim()).filter(client => client !== \"\")\n                }\n                \n                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é\n                sendNotification(\n                    message,\n                    options.notificationChannel,\n                    clientsArray,\n                    options.silentNotification\n                )\n            }\n\n            if (options.changeName) service.setName(\"‚ùóÔ∏è \" + date)\n        }\n\n        if (!lowBattery && !charging) {\n            if (options.changeName) service.setName(date)\n            variables.notificationSend = false\n        }\n    } catch (e) {\n        log.error(\"–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏: \" + e.message);\n    }\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–∞–Ω–∞–ª–∞\n * @param {Object} state - –û–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–∞—Ç–∞—Ä–µ–∏\n * @param {String} date - –î–∞—Ç–∞ –∑–∞–º–µ–Ω—ã/–∑–∞—Ä—è–¥–∫–∏\n * @param {String} channel - –ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\n * @returns {String} –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ\n */\nfunction formatNotificationMessage(state, date, channel) {\n    if (channel && channel.startsWith(\"Telegram\")) {\n        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Telegram - —Å—Ä–∞–∑—É —Å—Ç—Ä–æ–∫–∞\n        let text = \"‚ùóÔ∏è *–ë–∞—Ç–∞—Ä–µ—è —Ä–∞–∑—Ä—è–∂–µ–Ω–∞!*\\n\"\n        text += state.name + \" –≤ \" + state.room + \" (ID: \" + state.uuid + \")\\n\"\n        if (state.placement != \"\") text += state.placement.trim() + \"\\n\"\n        text += \"\\n\"\n        text += \"–ó–∞—Ä—è–¥: \" + state.level + \"%\\n\"\n        if (state.batteryType != \"\" && state.batteryType != \"-\") text += \"–¢–∏–ø: \" + state.batteryType + \" (\" + state.quantity + \" —à—Ç.)\\n\"\n        if (state.chargingType != \"\" && state.chargingType != \"-\") text += \"–ó–∞—Ä—è–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑: \" + state.chargingType + \" \\n\"\n        text += \"\\n\"\n        if (state.comment != \"\") text += state.comment.trim() + \"\\n\"\n        text += \"–î–∞—Ç–∞ \" + (state.chargingType != \"\" ? \"–∑–∞—Ä—è–¥–∫–∏\" : \"–∑–∞–º–µ–Ω—ã –±–∞—Ç–∞—Ä–µ–∏\") + \": \" + date.replaceAll(\"-\", \".\")\n        \n        return text\n    } else {\n        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö –∫–∞–Ω–∞–ª–æ–≤\n        let text = \"‚ùóÔ∏è –ë–∞—Ç–∞—Ä–µ—è —Ä–∞–∑—Ä—è–∂–µ–Ω–∞! \"\n        text += state.name + \" –≤ \" + state.room + \" (ID: \" + state.uuid + \") \"\n        if (state.placement != \"\") text += \" \" + state.placement.trim()\n        text += \". –ó–∞—Ä—è–¥: \" + state.level + \"%\"\n        if (state.batteryType != \"\") text += \" –¢–∏–ø: \" + state.batteryType + \" (\" + state.quantity + \" —à—Ç.)\"\n        if (state.chargingType != \"\") text += \" –ó–∞—Ä—è–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑: \" + state.chargingType + \" \"\n        if (state.comment != \"\") text += state.comment.trim()\n        text += \"–î–∞—Ç–∞ \" + (state.chargingType != \"\" ? \"–∑–∞—Ä—è–¥–∫–∏\" : \"–∑–∞–º–µ–Ω—ã –±–∞—Ç–∞—Ä–µ–∏\") + \": \" + date.replaceAll(\"-\", \".\")\n        \n        return text\n    }\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Notify\n * @param {String} message - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏\n * @param {String} channel - –ö–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"Telegram_1\", \"Web_1\")\n * @param {Array} clients - –ú–∞—Å—Å–∏–≤ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –∫–ª–∏–µ–Ω—Ç–æ–≤\n * @param {Boolean} silent - –§–ª–∞–≥ —Ç–∏—Ö–æ–≥–æ —Ä–µ–∂–∏–º–∞\n */\nfunction sendNotification(message, channel, clients, silent) {\n    try {\n        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç—ã, —Ç–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–¥–∞–Ω –∫–∞–Ω–∞–ª\n        if (clients && clients.length > 0 && (!channel || channel.trim() === \"\")) {\n            log.error(\"BatteryMonitoring: –ó–∞–¥–∞–Ω—ã –∫–ª–∏–µ–Ω—Ç—ã, –Ω–æ –Ω–µ —É–∫–∞–∑–∞–Ω –∫–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\")\n            return\n        }\n\n        // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n        let notify = Notify.text(message)\n            .debugText(\"BatteryMonitoring\")\n\n        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–∏—Ö–∏–π —Ä–µ–∂–∏–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n        if (silent) {\n            notify = notify.silent(true)\n        }\n\n        // –ï—Å–ª–∏ –∑–∞–¥–∞–Ω—ã –∏ –∫–∞–Ω–∞–ª, –∏ –∫–ª–∏–µ–Ω—Ç—ã, —Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–¥—Ä–µ—Å–∞—Ç–æ–≤\n        if (channel && channel.trim() !== \"\" && clients && clients.length > 0) {\n            // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É, —Ç–∞–∫ –∫–∞–∫ spread operator –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è\n            clients.forEach(function(client) {\n                notify = notify.to(channel, client)\n            })\n        }\n\n        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n        notify.send()\n    } catch (e) {\n        log.error(\"BatteryMonitoring: –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: \" + e.message)\n    }\n}\n\nfunction getDeviceName(source) {\n    const acc = source.getAccessory();\n    const room = acc.getRoom().getName()\n    const accName = acc.getName()\n    const name = accName + \" / \" + acc.getUUID() + \" (\" + room + \")\"\n    return name\n}\n\n// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–µ–¥—É—â–µ–≥–æ –Ω—É–ª—è, –µ—Å–ª–∏ —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ 10\nfunction padNumber(num) {\n    return num < 10 ? \"0\" + num : num.toString();\n}\n\nfunction getCurrentDateString() {\n    var currentDate = new Date();\n    var formattedDate =\n        padNumber(currentDate.getDate()) + \"-\" +\n        padNumber(currentDate.getMonth() + 1) + \"-\" +\n        currentDate.getFullYear(); // –§–æ—Ä–º–∞—Ç: –¥–¥-–º–º-–≥–≥–≥–≥\n    return formattedDate\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ç–∏–ø–æ–≤ –±–∞—Ç–∞—Ä–µ–π\n * @returns {Array} –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ç–∏–ø–∞–º–∏ –±–∞—Ç–∞—Ä–µ–π –¥–ª—è —Ñ–æ—Ä–º—ã\n */\nfunction getBatteryTypesList() {\n    let typesList = [];\n    typesList.push({ name: { ru: \"–ù–µ –≤—ã–±—Ä–∞–Ω–æ\", en: \"Not selected\" }, value: \"\" });\n    batteryTypes.forEach(function (b) {\n        typesList.push({ name: { ru: b, en: b }, type: \"String\", value: b });\n    })\n    typesList.push({ name: { ru: \"–î—Ä—É–≥–æ–π\", en: \"Another\" }, value: \"–î—Ä—É–≥–æ–π\" });\n    return typesList;\n}\n\n/**\n * –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ —Ç–∏–ø–æ–≤ –∑–∞—Ä—è–¥–∫–∏\n * @returns {Array} –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ç–∏–ø–∞–º–∏ –∑–∞—Ä—è–¥–∫–∏ –¥–ª—è —Ñ–æ—Ä–º—ã\n */\nfunction getChargingTypesList() {\n    let chargingList = [];\n    chargingList.push({ name: { ru: \"–ù–µ –ø–µ—Ä–µ–∑–∞—Ä—è–∂–∞–µ—Ç—Å—è\", en: \"Not charging\" }, value: \"\" });\n    chargingTypes.forEach(function (b) {\n        chargingList.push({ name: { ru: b, en: b }, type: \"String\", value: b });\n    })\n    chargingList.push({ name: { ru: \"–î—Ä—É–≥–æ–π\", en: \"Another\" }, value: \"–î—Ä—É–≥–æ–π –≤–∞—Ä–∏–∞–Ω—Ç\" });\n    return chargingList;\n}",
    "type": "LOGIC"
  }
}