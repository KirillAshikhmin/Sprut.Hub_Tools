{
  "scenarioTemplate": {
    "name": "üåÖ –î–µ–Ω—å-–ù–æ—á—å",
    "desc": "–õ–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞ —Å–æ–ª–Ω—Ü–∞ –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º, –∏–ª–∏ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—è—Ä–Ω—ã–π –¥–µ–Ω—å –∏ –ø–æ–ª—è—Ä–Ω—É—é –Ω–æ—á—å.\n\n–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö–∞–±–∞ –≤ –º–æ–º–µ–Ω—Ç –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞.\n\n–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ö–∞–±–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è. –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–π–æ—Å—Ç–≤–∞—Ö - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –∫–æ–¥–µ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤ —Ä–∞–∑–¥–µ–ª–µ —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏.",
    "active": true,
    "onStart": true,
    "sync": false,
    "data": "// –í—ã–Ω–æ—Å–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ info\nconst scenarioName = {\n  ru: \"üåÖ –î–µ–Ω—å-–ù–æ—á—å\",\n  en: \"üåÖ Day-Night\"\n};\n\nconst scenarioDescription = {\n  ru: \"–õ–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç –∏ –æ—Ç–∫–ª—é—á–∞–µ—Ç –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞ —Å–æ–ª–Ω—Ü–∞ –ø–æ —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º, –∏–ª–∏ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—è—Ä–Ω—ã–π –¥–µ–Ω—å –∏ –ø–æ–ª—è—Ä–Ω—É—é –Ω–æ—á—å.\\n\\n–ù–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö–∞–±–∞ –≤ –º–æ–º–µ–Ω—Ç –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞.\\n\\n–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ö–∞–±–∞ –≤ —Ä–∞–∑–¥–µ–ª–µ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è. –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Å—Ç—Ä–π–æ—Å—Ç–≤–∞—Ö - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –∫–æ–¥–µ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤ —Ä–∞–∑–¥–µ–ª–µ —Å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞–º–∏.\",\n  en: \"Logical scenario that automatically turns on and off a switch based on sunrise and sunset times for specified coordinates, or at specific times. Correctly handles polar day and polar night.\\n\\nIndependent of the hub state at sunrise and sunset.\\n\\nCoordinates can be found in hub settings under Date & Time. If you plan to use the scenario on multiple devices, coordinates can be specified in the scenario code in the constants section.\"\n};\n\n// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ú–æ—Å–∫–≤–∞)\nconst DEFAULT_COORDINATES = {\n  LATITUDE: 55.7558,   // –®–∏—Ä–æ—Ç–∞ –ú–æ—Å–∫–≤—ã\n  LONGITUDE: 37.6173,  // –î–æ–ª–≥–æ—Ç–∞ –ú–æ—Å–∫–≤—ã\n  ELEVATION: 156       // –í—ã—Å–æ—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è –≤ –º–µ—Ç—Ä–∞—Ö (–ú–æ—Å–∫–≤–∞)\n};\n\ninfo = {\n  name: scenarioName.ru,\n  description: scenarioDescription.ru,\n  version: \"1.1\",\n  author: \"@BOOMikru\",\n  onStart: true,\n  sourceServices: [\n    HS.Switch, HS.Outlet, HS.Fan, HS.FanBasic, HS.Lightbulb,\n    HS.Faucet, HS.C_PetFeeder, HS.Valve, HS.HeaterCooler, HS.AirPurifier,\n    HS.IrrigationSystem, HS.Television, HS.HumidifierDehumidifier, HS.CameraControl\n  ],\n  sourceCharacteristics: [HC.On, HC.Active],\n  options: {\n    desc: {\n      name: { en: \"\", ru: \"\" },\n      desc: scenarioDescription,\n      type: \"String\",\n      value: \"\",\n      formType: \"status\"\n    },\n    html: {\n      name: { en: \"\", ru: \"\" },\n      type: \"String\",\n      value: \"–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ –Ω–æ–≤–æ—Å—Ç–∏: <ul><li><a href='https://t.me/smart_sputnik' target='_blank'>Telegram-–∫–∞–Ω–∞–ª–µ</a></li><li><a href='https://kirillashikhmin.github.io/sht/' target='_blank'>C–∞–π—Ç–µ –∞–≤—Ç–æ—Ä–∞</a></li><li><a href='https://github.com/KirillAshikhmin/Sprut.Hub_Tools/' target='_blank'>GitHub</a></li></ul>\",\n      formType: \"html\"\n    },\n    latitude: {\n      name: {\n        en: \"Latitude\",\n        ru: \"–®–∏—Ä–æ—Ç–∞\"\n      },\n      desc: {\n        en: \"Geographic latitude in decimal degrees (e.g., 55.7558 for Moscow). Required if fixed time is not specified.\",\n        ru: \"–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —à–∏—Ä–æ—Ç–∞ –≤ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –≥—Ä–∞–¥—É—Å–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, 55.7558 –¥–ª—è –ú–æ—Å–∫–≤—ã). –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.\"\n      },\n      type: \"Double\",\n      value: DEFAULT_COORDINATES.LATITUDE,\n      minValue: -90,\n      maxValue: 90\n    },\n    longitude: {\n      name: {\n        en: \"Longitude\",\n        ru: \"–î–æ–ª–≥–æ—Ç–∞\"\n      },\n      desc: {\n        en: \"Geographic longitude in decimal degrees (e.g., 37.6173 for Moscow). Required if fixed time is not specified.\",\n        ru: \"–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –¥–æ–ª–≥–æ—Ç–∞ –≤ –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö –≥—Ä–∞–¥—É—Å–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, 37.6173 –¥–ª—è –ú–æ—Å–∫–≤—ã). –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.\"\n      },\n      type: \"Double\",\n      value: DEFAULT_COORDINATES.LONGITUDE,\n      minValue: -180,\n      maxValue: 180,\n    },\n    elevation: {\n      name: {\n        en: \"Elevation above sea level (meters)\",\n        ru: \"–í—ã—Å–æ—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è (–º–µ—Ç—Ä—ã)\"\n      },\n      desc: {\n        en: \"Affects the accuracy of sunrise/sunset calculations.\",\n        ru: \"–í–ª–∏—è–µ—Ç –Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞.\"\n      },\n      type: \"Integer\",\n      value: DEFAULT_COORDINATES.ELEVATION,\n      minValue: 0,\n      maxValue: 8848,\n      step: 1\n    },\n    sunriseOffset: {\n      name: {\n        en: \"Before/after sunrise (minutes)\",\n        ru: \"–î–æ/–ø–æ—Å–ª–µ —Ä–∞—Å—Å–≤–µ—Ç–∞ (–º–∏–Ω—É—Ç—ã)\"\n      },\n      desc: {\n        en: \"Time offset in minutes from sunrise. Positive value - after sunrise, negative - before sunrise (e.g., 60 = 1 hour after, -60 = 1 hour before)\",\n        ru: \"–°–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Ö–æ–¥–∞. –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –ø–æ—Å–ª–µ –≤–æ—Å—Ö–æ–¥–∞, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ - –¥–æ –≤–æ—Å—Ö–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 = —á–µ—Ä–µ–∑ —á–∞—Å –ø–æ—Å–ª–µ –≤–æ—Å—Ö–æ–¥–∞, -60 = –∑–∞ —á–∞—Å –¥–æ –≤–æ—Å—Ö–æ–¥–∞)\"\n      },\n      type: \"Integer\",\n      value: 0,\n      minValue: -1440,\n      maxValue: 1440,\n      step: 1\n    },\n    sunsetOffset: {\n      name: {\n        en: \"Before/after sunset (minutes)\",\n        ru: \"–î–æ/–ø–æ—Å–ª–µ –∑–∞–∫–∞—Ç–∞ (–º–∏–Ω—É—Ç—ã)\"\n      },\n      desc: {\n        en: \"Time offset in minutes from sunset. Positive value - after sunset, negative - before sunset (e.g., 60 = 1 hour after, -60 = 1 hour before)\",\n        ru: \"–°–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ –º–∏–Ω—É—Ç–∞—Ö –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–∫–∞—Ç–∞. –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - –ø–æ—Å–ª–µ –∑–∞–∫–∞—Ç–∞, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ - –¥–æ –∑–∞–∫–∞—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 = —á–µ—Ä–µ–∑ —á–∞—Å –ø–æ—Å–ª–µ –∑–∞–∫–∞—Ç–∞, -60 = –∑–∞ —á–∞—Å –¥–æ –∑–∞–∫–∞—Ç–∞)\"\n      },\n      type: \"Integer\",\n      value: 0,\n      minValue: -1440,\n      maxValue: 1440,\n      step: 1\n    },\n    fixedOnTime: {\n      name: {\n        en: \"Fixed turn on time\",\n        ru: \"–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è\"\n      },\n      desc: {\n        en: \"Fixed time to turn on the switch (format: HH:MM or H:MM in 24-hour format). If specified, this time will be used instead of sunrise otherwise leave blank.\",\n        ru: \"–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è (—Ñ–æ—Ä–º–∞—Ç: –ß–ß:–ú–ú –≤ 24-—á–∞—Å–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ). –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, —ç—Ç–æ –≤—Ä–µ–º—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Ö–æ–¥–∞ –∏–Ω–∞—á–µ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º.\"\n      },\n      type: \"String\",\n      value: \"\"\n    },\n    fixedOffTime: {\n      name: {\n        en: \"Fixed turn off time\",\n        ru: \"–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\"\n      },\n      desc: {\n        en: \"Fixed time to turn off the switch (format: HH:MM or H:MM in 24-hour format). If specified, this time will be used instead of sunset otherwise leave blank.\",\n        ru: \"–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è (—Ñ–æ—Ä–º–∞—Ç: –ß–ß:–ú–ú –≤ 24-—á–∞—Å–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ). –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, —ç—Ç–æ –≤—Ä–µ–º—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–∫–∞—Ç–∞ –∏–Ω–∞—á–µ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º.\"\n      },\n      type: \"String\",\n      value: \"\"\n    },\n    allowManualControl: {\n      name: {\n        en: \"Allow manual control\",\n        ru: \"–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è\"\n      },\n      desc: {\n        en: \"If enabled, the device state will only change at sunrise/sunset times (or fixed times) and at hub startup. If disabled, the device will restore day/night state on any change.\",\n        ru: \"–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, —Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è —Ä–∞—Å—Å–≤–µ—Ç–∞ –∏ –∑–∞–∫–∞—Ç–∞ (–∏–ª–∏ –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ), –∞ —Ç–∞–∫ –∂–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ö–∞–±–∞. –ï—Å–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω–æ, —Ç–æ –ø—Ä–∏ –ª—é–±–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–µ–Ω—å\\\\–Ω–æ—á—å.\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    changeServiceName: {\n      name: {\n        en: \"Change service name\",\n        ru: \"–ú–µ–Ω—è—Ç—å –∏–º—è —Å–µ—Ä–≤–∏—Å–∞\"\n      },\n      desc: {\n        en: \"If enabled, the service name will change to show current state (Day or Night)\",\n        ru: \"–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –±—É–¥–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–î–µ–Ω—å –∏–ª–∏ –ù–æ—á—å)\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    invert: {\n      name: {\n        en: \"Invert\",\n        ru: \"–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å\"\n      },\n      desc: {\n        en: \"If enabled, the switch will be turned off at sunrise time and turned on at sunset time\",\n        ru: \"–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–∞—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –≤–æ—Å—Ö–æ–¥–∞ –∏ –≤–∫–ª—é—á–∞—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–∫–∞—Ç–∞\"\n      },\n      type: \"Boolean\",\n      value: false\n    }\n  },\n  variables: {\n    initialState: undefined,\n    turnOnTask: undefined,  // Cron –∑–∞–¥–∞—á–∞ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è\n    turnOffTask: undefined,  // Cron –∑–∞–¥–∞—á–∞ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n    lastOnSchedule: undefined,  // –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏—è (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)\n    lastOffSchedule: undefined,  // –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)\n    polarCronTask: undefined,  // Cron –∑–∞–¥–∞—á–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–ª—è—Ä–Ω–æ–≥–æ –¥–Ω—è/–Ω–æ—á–∏\n    lastPolarSchedule: undefined  // –ü–æ—Å–ª–µ–¥–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª—è—Ä–Ω–æ–π –∑–∞–¥–∞—á–∏ (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)\n  }\n}\n\n// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞\nconst SUN_CONSTANTS = {\n  ZENITH: 90.833,  // –£–≥–æ–ª –∑–µ–Ω–∏—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤–æ—Å—Ö–æ–¥–∞/–∑–∞–∫–∞—Ç–∞ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π)\n  MS_PER_MINUTE: 1000 * 60,\n  MS_PER_HOUR: 1000 * 60 * 60,\n  MINUTES_PER_HOUR: 60,\n  HOURS_PER_DAY: 24,\n  DEG_TO_RAD: Math.PI / 180,\n  RAD_TO_DEG: 180 / Math.PI,\n  EARTH_RADIUS_KM: 6371  // –†–∞–¥–∏—É—Å –ó–µ–º–ª–∏ –≤ –∫–∏–ª–æ–º–µ—Ç—Ä–∞—Ö\n};\n\n// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π\nconst CONTEXT_CONSTANTS = {\n  DELIMITER: ' <- ',\n  LOGIC_PREFIX: 'LOGIC',\n  CHARACTERISTIC_PREFIX: 'C',\n  MIN_ELEMENTS: 3\n};\n\nconst DEBUG = false;  // –í–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏\nconst LOG_PREFIX = scenarioName.ru + \". \";\n\n// ============================================================================\n// –ì–õ–ê–í–ù–ê–Ø –§–£–ù–ö–¶–ò–Ø - –¢–û–ß–ö–ê –í–•–û–î–ê\n// ============================================================================\nfunction trigger(source, value, variables, options, context) {\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–¥–µ–ª–∞–Ω–æ –Ω–µ —Å–∞–º–∏–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–æ–≤\n  if (isSelfChanged(context)) {\n    return;\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏—Å—Ç–æ—á–Ω–∏–∫ - —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞\n  if (source.getType() !== HC.On && source.getType() !== HC.Active) {\n    return;\n  }\n\n  const needChangeState = !options.allowManualControl || !variables.initialState\n  variables.initialState = true;\n\n  // –ï—Å–ª–∏ —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –∏–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ, –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º cron –∑–∞–¥–∞—á–∏\n  updateDayNightStatus(source, variables, options, needChangeState);\n}\n\n// ============================================================================\n// –§–£–ù–ö–¶–ò–ò –î–õ–Ø –û–ë–ù–û–í–õ–ï–ù–ò–Ø –°–¢–ê–¢–£–°–ê\n// ============================================================================\n\n\nfunction updateDayNightStatus(source, variables, options, needChangeState) {\n  try {\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ\n    if (!validateOptions(options)) {\n      return;\n    }\n\n    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è\n    const now = new Date();\n\n    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –≤—ã—á–∏—Å–ª—è—Ç—å –≤—Ä–µ–º—è –≤–æ—Å—Ö–æ–¥–∞/–∑–∞–∫–∞—Ç–∞\n    // –í—ã—á–∏—Å–ª—è–µ–º, –µ—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –≤—Ä–µ–º—è –Ω–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ\n    const hasFixedOn = hasFixedTimeValue(options.fixedOnTime);\n    const hasFixedOff = hasFixedTimeValue(options.fixedOffTime);\n    const needSunTimes = !hasFixedOn || !hasFixedOff;\n\n    let sunTimes = null;\n    let coordinates = null;\n    if (needSunTimes) {\n      coordinates = getCoordinates(options);\n\n      if (areCoordinatesValid(coordinates.latitude, coordinates.longitude)) {\n        // –í—ã—á–∏—Å–ª—è–µ–º –æ–±–∞ –≤—Ä–µ–º–µ–Ω–∏ —Å—Ä–∞–∑—É (–æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –æ–±–æ–∏—Ö –≤—ã–∑–æ–≤–æ–≤ getTurnTime)\n        sunTimes = calculateSunTimes(now, coordinates.latitude, coordinates.longitude, coordinates.elevation);\n\n        // –ï—Å–ª–∏ –ø–æ–ª—è—Ä–Ω—ã–π –¥–µ–Ω—å –∏–ª–∏ –ø–æ–ª—è—Ä–Ω–∞—è –Ω–æ—á—å, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ\n        if (sunTimes.status === \"polarDay\" || sunTimes.status === \"polarNight\") {\n          handlePolarDayNight(source, variables, options, sunTimes.status, needChangeState);\n          return;\n        }\n      }\n    }\n\n    // –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n    // sunTimes —É–∂–µ –≤—ã—á–∏—Å–ª–µ–Ω –æ–¥–∏–Ω —Ä–∞–∑, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ\n    const turnOnTime = getTurnTime(now, options, true, sunTimes);\n    const turnOffTime = getTurnTime(now, options, false, sunTimes);\n\n    if (!turnOnTime || !turnOffTime) {\n      logError(\"–ù–µ —É–¥–∞–ª–æ—Å—å –≤—ã—á–∏—Å–ª–∏—Ç—å –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è. –í–æ–∑–º–æ–∂–Ω–æ, –æ—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞.\");\n      // –ü—Ä–∏ –æ—à–∏–±–∫–µ —Ä–∞—Å—á–µ—Ç–∞ –Ω–µ –º–µ–Ω—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–µ —Å–æ–∑–¥–∞–µ–º cron –∑–∞–¥–∞—á–∏\n      return;\n    }\n\n    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è\n    const shouldBeOn = getCurrentState(now, turnOnTime, turnOffTime, options);\n\n    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–º—è —Å–µ—Ä–≤–∏—Å–∞\n    if (needChangeState === true) setDeviceState(source, options, shouldBeOn);\n\n    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º cron –∑–∞–¥–∞—á–∏\n    setupCronTasks(source, variables, options, turnOnTime, turnOffTime);\n\n    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ\n    const onTimeStr = formatTime(turnOnTime);\n    const offTimeStr = formatTime(turnOffTime);\n    logInfo(`–í—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è: ${onTimeStr}, –æ—Ç–∫–ª—é—á–µ–Ω–∏—è: ${offTimeStr}, —Ü–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: ${shouldBeOn ? \"–≤–∫–ª—é—á–µ–Ω\" : \"–æ—Ç–∫–ª—é—á–µ–Ω\"}, –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ: ${needChangeState}`);\n  } catch (error) {\n    logError(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –¥–µ–Ω—å-–Ω–æ—á—å: \" + error);\n  }\n}\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —É–∫–∞–∑–∞–Ω–æ –ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞)\n * @param {string} timeValue - –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ –æ–ø—Ü–∏–π\n * @returns {boolean} true –µ—Å–ª–∏ –≤—Ä–µ–º—è —É–∫–∞–∑–∞–Ω–æ –∏ –Ω–µ –ø—É—Å—Ç–æ–µ\n */\nfunction hasFixedTimeValue(timeValue) {\n  return timeValue && timeValue.trim() !== \"\";\n}\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —É–∫–∞–∑–∞–Ω–æ –ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (–ª—é–±–æ–µ –∏–∑ –¥–≤—É—Ö)\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @returns {boolean} true –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è\n */\nfunction hasFixedTime(options) {\n  return hasFixedTimeValue(options.fixedOnTime) || hasFixedTimeValue(options.fixedOffTime);\n}\n\n/**\n * –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∏–∑ –æ–ø—Ü–∏–π\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @returns {Object} –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏ latitude, longitude, elevation\n */\nfunction getCoordinates(options) {\n  return {\n    latitude: options.latitude,\n    longitude: options.longitude,\n    elevation: options.elevation !== undefined ? options.elevation : 0\n  };\n}\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç\n * @param {number} latitude - —à–∏—Ä–æ—Ç–∞\n * @param {number} longitude - –¥–æ–ª–≥–æ—Ç–∞\n * @returns {boolean} true –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–∞–ª–∏–¥–Ω—ã\n */\nfunction areCoordinatesValid(latitude, longitude) {\n  return isValidCoordinate(latitude, -90, 90, \"–®–∏—Ä–æ—Ç–∞\") && isValidCoordinate(longitude, -180, 180, \"–î–æ–ª–≥–æ—Ç–∞\");\n}\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–π —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @returns {boolean} true –µ—Å–ª–∏ –æ–ø—Ü–∏–∏ –≤–∞–ª–∏–¥–Ω—ã\n */\nfunction validateOptions(options) {\n  const hasFixed = hasFixedTime(options);\n  const hasCoordinates = areCoordinatesValid(options.latitude, options.longitude);\n\n  if (!hasFixed && !hasCoordinates) {\n    logError(\"–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ª–∏–±–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –ª–∏–±–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è\");\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤—Ä–µ–º—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã\n * –ï—Å–ª–∏ –≤—Ä–µ–º—è —É–∂–µ –ø—Ä–æ—à–ª–æ —Å–µ–≥–æ–¥–Ω—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è (–¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è)\n * –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –¥–ª—è cron –∑–∞–¥–∞—á–∏, –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –Ω–∞ –∑–∞–≤—Ç—Ä–∞\n * @param {Date} baseDate - –±–∞–∑–æ–≤–∞—è –¥–∞—Ç–∞\n * @param {Date} targetTime - —Ü–µ–ª–µ–≤–æ–µ –≤—Ä–µ–º—è\n * @param {boolean} forCron - –µ—Å–ª–∏ true, –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –µ—Å–ª–∏ –≤—Ä–µ–º—è –ø—Ä–æ—à–ª–æ\n * @returns {Date} –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è\n */\nfunction normalizeTime(baseDate, targetTime, forCron) {\n  const result = new Date(targetTime);\n  result.setFullYear(baseDate.getFullYear(), baseDate.getMonth(), baseDate.getDate());\n\n  // –ï—Å–ª–∏ –≤—Ä–µ–º—è —É–∂–µ –ø—Ä–æ—à–ª–æ –∏ —ç—Ç–æ –¥–ª—è cron –∑–∞–¥–∞—á–∏, –ø–µ—Ä–µ–Ω–æ—Å–∏–º –Ω–∞ –∑–∞–≤—Ç—Ä–∞\n  if (forCron && result.getTime() <= baseDate.getTime()) {\n    result.setDate(result.getDate() + 1);\n  }\n\n  return result;\n}\n\n/**\n * –í—ã—á–∏—Å–ª—è–µ—Ç –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è\n * @param {Date} date - –¥–∞—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {boolean} isTurnOn - true –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è, false –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n * @param {Object|null} sunTimes - —Ä–µ–∑—É–ª—å—Ç–∞—Ç calculateSunTimes (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω –∑–∞—Ä–∞–Ω–µ–µ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Ä–µ–º—è –≤–æ—Å—Ö–æ–¥–∞/–∑–∞–∫–∞—Ç–∞)\n * @returns {Date|null} –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ null –ø—Ä–∏ –æ—à–∏–±–∫–µ\n */\nfunction getTurnTime(date, options, isTurnOn, sunTimes) {\n  const fixedTimeKey = isTurnOn ? 'fixedOnTime' : 'fixedOffTime';\n  const offsetKey = isTurnOn ? 'sunriseOffset' : 'sunsetOffset';\n\n  // –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ\n  if (options[fixedTimeKey] && options[fixedTimeKey].trim() !== \"\") {\n    const fixedTime = parseTimeString(options[fixedTimeKey]);\n    if (fixedTime) {\n      const result = new Date(date);\n      result.setHours(fixedTime.hours, fixedTime.minutes, 0, 0);\n      return normalizeTime(date, result, false);\n    }\n  }\n\n  // –ò–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Ä–µ–º—è –≤–æ—Å—Ö–æ–¥–∞/–∑–∞–∫–∞—Ç–∞ —Å —É—á–µ—Ç–æ–º –æ—Ñ—Ñ—Å–µ—Ç–∞\n  // sunTimes –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω –∏–∑ updateDayNightStatus\n  if (!sunTimes) {\n    return null;\n  }\n\n  if (sunTimes.status !== \"normal\") {\n    return null;\n  }\n\n  const sunTime = isTurnOn ? sunTimes.sunrise : sunTimes.sunset;\n  if (!sunTime) {\n    return null;\n  }\n\n  const offset = options[offsetKey] !== undefined ? options[offsetKey] : 0;\n  // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ñ—Ñ—Å–µ—Ç\n  const result = new Date(sunTime.getTime() + offset * SUN_CONSTANTS.MS_PER_MINUTE);\n  return normalizeTime(date, result, false);\n}\n\n\n/**\n * –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è\n * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ Date –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —á–µ—Ä–µ–∑ –ø–æ–ª–Ω–æ—á—å\n * @param {Date} now - —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è\n * @param {Date} turnOnTime - –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è\n * @param {Date} turnOffTime - –≤—Ä–µ–º—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @returns {boolean} true –µ—Å–ª–∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω\n */\nfunction getCurrentState(now, turnOnTime, turnOffTime, options) {\n  // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã\n  const normalizedOnTime = normalizeTime(now, turnOnTime, false);\n  const normalizedOffTime = normalizeTime(now, turnOffTime, false);\n\n  // –ò–∑–≤–ª–µ–∫–∞–µ–º –≤—Ä–µ–º—è –≤ –º–∏–Ω—É—Ç–∞—Ö –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–Ω—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è\n  const nowMinutes = now.getHours() * SUN_CONSTANTS.MINUTES_PER_HOUR + now.getMinutes();\n  const onMinutes = normalizedOnTime.getHours() * SUN_CONSTANTS.MINUTES_PER_HOUR + normalizedOnTime.getMinutes();\n  const offMinutes = normalizedOffTime.getHours() * SUN_CONSTANTS.MINUTES_PER_HOUR + normalizedOffTime.getMinutes();\n\n  // –ï—Å–ª–∏ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–≤–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è, –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –æ—Ç–∫–ª—é—á–µ–Ω\n  if (onMinutes === offMinutes) {\n    return false; // –í—Å–µ–≥–¥–∞ –æ—Ç–∫–ª—é—á–µ–Ω, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç invert\n  }\n\n  // –ï—Å–ª–∏ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –º–µ–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (–æ–±—ã—á–Ω—ã–π —Å–ª—É—á–∞–π: –≤–∫–ª—é—á–µ–Ω–∏–µ —É—Ç—Ä–æ–º, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—á–µ—Ä–æ–º)\n  if (onMinutes < offMinutes) {\n    return nowMinutes >= onMinutes && nowMinutes < offMinutes;\n  }\n\n  // –ï—Å–ª–∏ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (–≤–∫–ª—é—á–µ–Ω–∏–µ –≤–µ—á–µ—Ä–æ–º, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —É—Ç—Ä–æ–º)\n  // –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º, –∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ - –∑–∞–≤—Ç—Ä–∞ —É—Ç—Ä–æ–º\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º: –ª–∏–±–æ —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è >= –≤—Ä–µ–º–µ–Ω–∏ –≤–∫–ª—é—á–µ–Ω–∏—è (–≤–µ—á–µ—Ä —Å–µ–≥–æ–¥–Ω—è), –ª–∏–±–æ < –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (—É—Ç—Ä–æ –∑–∞–≤—Ç—Ä–∞)\n  return nowMinutes >= onMinutes || nowMinutes < offMinutes;\n}\n\n// ============================================================================\n// –†–ê–°–ß–ï–¢ –í–†–ï–ú–ï–ù–ò –í–û–°–•–û–î–ê –ò –ó–ê–ö–ê–¢–ê\n// ============================================================================\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –∏–∑ —Å–∏—Å—Ç–µ–º—ã\n * @returns {number} —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –≤ —á–∞—Å–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3 –¥–ª—è MSK UTC+3)\n */\nfunction getTimezoneOffset() {\n  try {\n    // –ü–æ–ª—É—á–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Ç–∞—Ö –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∞—Å—ã\n    const offsetMinutes = new Date().getTimezoneOffset();\n    // getTimezoneOffset –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–º–µ—â–µ–Ω–∏–π\n    // –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è UTC+3 –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç -180 –º–∏–Ω—É—Ç\n    const offsetHours = -offsetMinutes / 60;\n    return offsetHours;\n  } catch (error) {\n    logError(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞: \" + error);\n    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ú–æ—Å–∫–≤—ã (UTC+3)\n    return 3;\n  }\n}\n\n/**\n * –í—ã—á–∏—Å–ª—è–µ—Ç –Ω–æ–º–µ—Ä –¥–Ω—è –≤ –≥–æ–¥—É (–æ—Ç 1 –¥–æ 365/366)\n * @param {Date} date - –¥–∞—Ç–∞\n * @returns {number} –Ω–æ–º–µ—Ä –¥–Ω—è –≤ –≥–æ–¥—É\n */\nfunction getDayOfYear(date) {\n  const start = new Date(date.getFullYear(), 0, 0);\n  const diffMs = date.getTime() - start.getTime();\n  const msPerDay = SUN_CONSTANTS.MS_PER_HOUR * SUN_CONSTANTS.HOURS_PER_DAY;\n  return Math.floor(diffMs / msPerDay);\n}\n\n/**\n * –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (–µ—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∏–ª–∏ –±–æ–ª—å—à–µ 24, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º)\n * @param {number} timeValue - –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ —á–∞—Å–∞—Ö\n * @returns {number} –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏\n */\nfunction normalizeTimeValue(timeValue) {\n  if (timeValue < 0) {\n    return timeValue + 24;\n  }\n  if (timeValue >= 24) {\n    return timeValue - 24;\n  }\n  return timeValue;\n}\n\n/**\n * –°–æ–∑–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç Date –∏–∑ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏\n * @param {Date} baseDate - –±–∞–∑–æ–≤–∞—è –¥–∞—Ç–∞ (—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º 00:00:00)\n * @param {number} normalizedTime - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ —á–∞—Å–∞—Ö\n * @returns {Date} –æ–±—ä–µ–∫—Ç Date —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º\n */\nfunction createTimeFromNormalized(baseDate, normalizedTime) {\n  const hours = Math.floor(normalizedTime);\n  const fractionalHours = normalizedTime - hours;\n  const minutes = Math.floor(fractionalHours * 60);\n  const fractionalMinutes = fractionalHours * 60 - minutes;\n  const seconds = Math.round(fractionalMinutes * 60);\n  const result = new Date(baseDate);\n  result.setHours(hours, minutes, seconds, 0);\n  return result;\n}\n\n/**\n * –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —É—á–µ—Ç–æ–º –∏–Ω–≤–µ—Ä—Å–∏–∏\n * @param {Object} source - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)\n * @param {boolean} value - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏\n * @param {boolean} invert - –Ω—É–∂–Ω–æ –ª–∏ –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ\n * @returns {boolean} true –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ\n */\nfunction setDeviceValue(source, value, invert) {\n  if (invert) value = !value;\n  if (source.getType() === HC.On) {\n    if (source.getValue() != value) {\n      source.setValue(value);\n      return true;\n    }\n  } else if (source.getType() === HC.Active) {\n    let newValue = value ? 1 : 0;\n    if (source.getValue() != newValue) {\n      source.setValue(newValue);\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —É—á–µ—Ç–æ–º –æ–ø—Ü–∏–∏ invert –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–º—è —Å–µ—Ä–≤–∏—Å–∞\n * @param {Object} source - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {boolean} shouldBeOn - –¥–æ–ª–∂–Ω–æ –ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–æ\n */\nfunction setDeviceState(source, options, shouldBeOn) {\n  setDeviceValue(source, shouldBeOn, options.invert === true);\n  updateServiceName(source, options, shouldBeOn);\n}\n\n/**\n * –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–ª—è—Ä–Ω—ã–π –¥–µ–Ω—å –∏–ª–∏ –ø–æ–ª—è—Ä–Ω—É—é –Ω–æ—á—å\n * @param {Object} source - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)\n * @param {Object} variables - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {string} polarStatus - \"polarDay\" –¥–ª—è –ø–æ–ª—è—Ä–Ω–æ–≥–æ –¥–Ω—è, \"polarNight\" –¥–ª—è –ø–æ–ª—è—Ä–Ω–æ–π –Ω–æ—á–∏\n */\nfunction handlePolarDayNight(source, variables, options, polarStatus, needChangeState) {\n  const isPolarDay = polarStatus === \"polarDay\";\n  // –ü–æ–ª—è—Ä–Ω—ã–π –¥–µ–Ω—å - –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–µ–Ω (–¥–µ–Ω—å)\n  // –ü–æ–ª—è—Ä–Ω–∞—è –Ω–æ—á—å - –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –æ—Ç–∫–ª—é—á–µ–Ω (–Ω–æ—á—å)\n  const shouldBeOn = isPolarDay;\n\n  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –∏–º—è —Å–µ—Ä–≤–∏—Å–∞\n  if (needChangeState === true) setDeviceState(source, options, shouldBeOn);\n\n  // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º cron –∑–∞–¥–∞—á—É –Ω–∞ –ø–æ–ª–Ω–æ—á—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–ª—è—Ä–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞\n  const polarSchedule = \"0 0 0 * * *\";\n  variables.polarCronTask = setupSingleCronTask(\n    polarSchedule,\n    variables.lastPolarSchedule,\n    variables.polarCronTask,\n    source,\n    variables,\n    options,\n    \"–ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–ª—è—Ä–Ω–æ–≥–æ –¥–Ω—è/–Ω–æ—á–∏\"\n  );\n  variables.lastPolarSchedule = polarSchedule;\n\n  const statusText = isPolarDay ? \"–¥–µ–Ω—å\" : \"–Ω–æ—á—å\";\n  const stateText = shouldBeOn ? \"–≤–∫–ª—é—á–µ–Ω (–¥–µ–Ω—å)\" : \"–æ—Ç–∫–ª—é—á–µ–Ω (–Ω–æ—á—å)\";\n  logInfo(\"–ü–æ–ª—è—Ä–Ω—ã–π \" + statusText + \": –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å \" + stateText);\n}\n\n/**\n * –í—ã—á–∏—Å–ª—è–µ—Ç –≤—Ä–µ–º—è –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞ —Å–æ–ª–Ω—Ü–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∞—Ç—ã –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç\n * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—á–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Å —É—á–µ—Ç–æ–º –≤—ã—Å–æ—Ç—ã –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è\n * @param {Date} date - –¥–∞—Ç–∞\n * @param {number} latitude - —à–∏—Ä–æ—Ç–∞ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö\n * @param {number} longitude - –¥–æ–ª–≥–æ—Ç–∞ –≤ –≥—Ä–∞–¥—É—Å–∞—Ö\n * @param {number} elevation - –≤—ã—Å–æ—Ç–∞ –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è –≤ –º–µ—Ç—Ä–∞—Ö\n * @returns {Object} –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏:\n *   status: \"normal\" | \"polarDay\" | \"polarNight\"\n *   sunrise: Date | null - –≤—Ä–µ–º—è –≤–æ—Å—Ö–æ–¥–∞\n *   sunset: Date | null - –≤—Ä–µ–º—è –∑–∞–∫–∞—Ç–∞\n */\nfunction calculateSunTimes(date, latitude, longitude, elevation) {\n  try {\n    const rad = SUN_CONSTANTS.DEG_TO_RAD;\n    const latRad = latitude * rad;\n\n    // –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–º–µ—Ä –¥–Ω—è –≤ –≥–æ–¥—É\n    const dayOfYear = getDayOfYear(date);\n\n    // –í—ã—á–∏—Å–ª—è–µ–º –¥–µ–∫–ª–∏–Ω–∞—Ü–∏—é —Å–æ–ª–Ω—Ü–∞\n    const declination = 23.45 * rad * Math.sin(2 * Math.PI * (284 + dayOfYear) / 365);\n\n    // –í—ã—á–∏—Å–ª—è–µ–º —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏\n    const B = 2 * Math.PI * (dayOfYear - 81) / 365;\n    const equation = 9.87 * Math.sin(2 * B) - 7.53 * Math.cos(B) - 1.5 * Math.sin(B);\n\n    // –í—ã—á–∏—Å–ª—è–µ–º —Ä–µ—Ñ—Ä–∞–∫—Ü–∏—é —Å —É—á–µ—Ç–æ–º –≤—ã—Å–æ—Ç—ã –Ω–∞–¥ —É—Ä–æ–≤–Ω–µ–º –º–æ—Ä—è\n    const refraction = Math.acos(SUN_CONSTANTS.EARTH_RADIUS_KM / (SUN_CONSTANTS.EARTH_RADIUS_KM + elevation / 1000)) * SUN_CONSTANTS.RAD_TO_DEG;\n\n    // –í—ã—á–∏—Å–ª—è–µ–º —á–∞—Å–æ–≤–æ–π —É–≥–æ–ª\n    const zenithRad = SUN_CONSTANTS.ZENITH * rad;\n    const cosHourAngle = (Math.cos(zenithRad) - Math.sin(latRad) * Math.sin(declination)) /\n      (Math.cos(latRad) * Math.cos(declination));\n\n    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–ª—è—Ä–Ω—ã–π –¥–µ–Ω—å/–Ω–æ—á—å\n    if (cosHourAngle > 1) {\n      return {\n        status: \"polarNight\",\n        sunrise: null,\n        sunset: null\n      };\n    }\n    if (cosHourAngle < -1) {\n      return {\n        status: \"polarDay\",\n        sunrise: null,\n        sunset: null\n      };\n    }\n\n    // –í—ã—á–∏—Å–ª—è–µ–º —á–∞—Å–æ–≤–æ–π —É–≥–æ–ª –≤ –≥—Ä–∞–¥—É—Å–∞—Ö –∏ –≤—ã—á–∏—Ç–∞–µ–º —Ä–µ—Ñ—Ä–∞–∫—Ü–∏—é\n    const hourAngleRad = Math.acos(cosHourAngle);\n    const hourAngle = hourAngleRad * SUN_CONSTANTS.RAD_TO_DEG - refraction;\n\n    // –ü–æ–ª—É—á–∞–µ–º —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å –∏–∑ —Å–∏—Å—Ç–µ–º—ã\n    const timezoneOffset = getTimezoneOffset();\n\n    // –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è –≤–æ—Å—Ö–æ–¥–∞ –≤ UTC\n    const sunriseUTC = 12 - hourAngle / 15 - equation / 60 - (longitude / 15);\n    // –í—ã—á–∏—Å–ª—è–µ–º –≤—Ä–µ–º—è –∑–∞–∫–∞—Ç–∞ –≤ UTC\n    const sunsetUTC = 12 + hourAngle / 15 - equation / 60 - (longitude / 15);\n\n    // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è\n    const sunriseLocal = sunriseUTC + timezoneOffset;\n    const sunsetLocal = sunsetUTC + timezoneOffset;\n\n    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤—Ä–µ–º—è (–µ—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–æ—Å—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∏–ª–∏ –±–æ–ª—å—à–µ 24, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º)\n    const normalizedSunrise = normalizeTimeValue(sunriseLocal);\n    const normalizedSunset = normalizeTimeValue(sunsetLocal);\n\n    // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã Date —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º\n    const baseDate = new Date(date);\n    baseDate.setHours(0, 0, 0, 0);\n    const sunrise = createTimeFromNormalized(baseDate, normalizedSunrise);\n    const sunset = createTimeFromNormalized(baseDate, normalizedSunset);\n\n    return {\n      status: \"normal\",\n      sunrise: sunrise,\n      sunset: sunset\n    };\n  } catch (error) {\n    logError(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –≤—Ä–µ–º–µ–Ω–∏ –≤–æ—Å—Ö–æ–¥–∞ –∏ –∑–∞–∫–∞—Ç–∞: \" + error);\n    return {\n      status: \"normal\",\n      sunrise: null,\n      sunset: null\n    };\n  }\n}\n\n// ============================================================================\n// –ü–ê–†–°–ò–ù–ì –í–†–ï–ú–ï–ù–ò\n// ============================================================================\n\n/**\n * –ü–∞—Ä—Å–∏—Ç —Å—Ç—Ä–æ–∫—É –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ß–ß:–ú–ú –∏–ª–∏ –ß:–ú\n * @param {string} timeStr - —Å—Ç—Ä–æ–∫–∞ –≤—Ä–µ–º–µ–Ω–∏\n * @returns {Object|null} –æ–±—ä–µ–∫—Ç —Å –ø–æ–ª—è–º–∏ hours –∏ minutes –∏–ª–∏ null –ø—Ä–∏ –æ—à–∏–±–∫–µ\n */\nfunction parseTimeString(timeStr) {\n  if (!timeStr || typeof timeStr !== 'string') {\n    return null;\n  }\n\n  const trimmed = timeStr.trim();\n  if (trimmed === \"\") {\n    return null;\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç –ß–ß:–ú–ú –∏–ª–∏ –ß:–ú\n  const timePattern = /^(\\d{1,2}):(\\d{2})$/;\n  const match = trimmed.match(timePattern);\n\n  if (!match) {\n    logError(\"–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏: \" + trimmed + \". –û–∂–∏–¥–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç –ß–ß:–ú–ú\");\n    return null;\n  }\n\n  const hours = parseInt(match[1], 10);\n  const minutes = parseInt(match[2], 10);\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π\n  if (hours < 0 || hours >= 24) {\n    logError(\"–ß–∞—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-23: \" + hours);\n    return null;\n  }\n\n  if (minutes < 0 || minutes >= 60) {\n    logError(\"–ú–∏–Ω—É—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 0-59: \" + minutes);\n    return null;\n  }\n\n  return { hours: hours, minutes: minutes };\n}\n\n/**\n * –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –≤ —Å—Ç—Ä–æ–∫—É –ß–ß:–ú–ú\n * @param {Date} date - –¥–∞—Ç–∞/–≤—Ä–µ–º—è\n * @returns {string} –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞\n */\nfunction formatTime(date) {\n  const hours = date.getHours();\n  const minutes = date.getMinutes();\n  const hoursStr = hours < 10 ? \"0\" + hours : hours.toString();\n  const minutesStr = minutes < 10 ? \"0\" + minutes : minutes.toString();\n  return hoursStr + \":\" + minutesStr;\n}\n\n// ============================================================================\n// CRON –ó–ê–î–ê–ß–ò\n// ============================================================================\n\n/**\n * –û—Ç–º–µ–Ω—è–µ—Ç cron –∑–∞–¥–∞—á—É –±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º\n * @param {Object} task - –∑–∞–¥–∞—á–∞ –¥–ª—è –æ—Ç–º–µ–Ω—ã\n */\nfunction cancelCronTask(task) {\n  if (task) {\n    try {\n      task.cancel();\n    } catch (error) {\n      // –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –Ω–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ\n      if (DEBUG) {\n        logError(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ cron –∑–∞–¥–∞—á–∏: \" + error);\n      }\n    }\n  }\n}\n\n/**\n * –°–æ–∑–¥–∞–µ—Ç cron –∑–∞–¥–∞—á—É –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n * @param {string} schedule - —Å—Ç—Ä–æ–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è cron\n * @param {Object} source - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)\n * @param {Object} variables - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {string} taskType - —Ç–∏–ø –∑–∞–¥–∞—á–∏ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (\"–≤–∫–ª—é—á–µ–Ω–∏—è\" –∏–ª–∏ \"–æ—Ç–∫–ª—é—á–µ–Ω–∏—è\")\n * @returns {Object|undefined} —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ undefined –ø—Ä–∏ –æ—à–∏–±–∫–µ\n */\nfunction createCronTask(schedule, source, variables, options, taskType) {\n  if (!schedule) {\n    return undefined;\n  }\n\n  try {\n    const task = Cron.schedule(schedule, function () {\n      try {\n        updateDayNightStatus(source, variables, options, true);\n      } catch (error) {\n        logError(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ cron –∑–∞–¥–∞—á–∏ \" + taskType + \": \" + error);\n      }\n    });\n    return task;\n  } catch (error) {\n    logError(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ cron –∑–∞–¥–∞—á–∏ \" + taskType + \": \" + error);\n    return undefined;\n  }\n}\n\n\n/**\n * –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç cron –∑–∞–¥–∞—á–∏ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n * @param {Object} source - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)\n * @param {Object} variables - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {Date} turnOnTime - –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è\n * @param {Date} turnOffTime - –≤—Ä–µ–º—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n */\nfunction setupCronTasks(source, variables, options, turnOnTime, turnOffTime) {\n  // –û—Ç–º–µ–Ω—è–µ–º –∑–∞–¥–∞—á—É –¥–ª—è –ø–æ–ª—è—Ä–Ω–æ–≥–æ –¥–Ω—è/–Ω–æ—á–∏, –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞\n  if (variables.polarCronTask) {\n    cancelCronTask(variables.polarCronTask);\n    variables.polarCronTask = undefined;\n    variables.lastPolarSchedule = undefined;\n  }\n  // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –≤—Ä–µ–º—è –¥–ª—è cron –∑–∞–¥–∞—á (–ø–µ—Ä–µ–Ω–æ—Å–∏–º –Ω–∞ –∑–∞–≤—Ç—Ä–∞, –µ—Å–ª–∏ –≤—Ä–µ–º—è —É–∂–µ –ø—Ä–æ—à–ª–æ)\n  const now = new Date();\n  const onTimeForCron = normalizeTime(now, turnOnTime, true);\n  const offTimeForCron = normalizeTime(now, turnOffTime, true);\n\n  // –ü–æ–ª—É—á–∞–µ–º –Ω–æ–≤—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é cron, –∞ –Ω–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏)\n  const onCronSchedule = getCronSchedule(onTimeForCron);\n  const offCronSchedule = getCronSchedule(offTimeForCron);\n\n  // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∑–∞–¥–∞—á—É –≤–∫–ª—é—á–µ–Ω–∏—è\n  variables.turnOnTask = setupSingleCronTask(\n    onCronSchedule,\n    variables.lastOnSchedule,\n    variables.turnOnTask,\n    source,\n    variables,\n    options,\n    \"–≤–∫–ª—é—á–µ–Ω–∏—è\"\n  );\n  variables.lastOnSchedule = onCronSchedule;\n\n  // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∑–∞–¥–∞—á—É –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n  variables.turnOffTask = setupSingleCronTask(\n    offCronSchedule,\n    variables.lastOffSchedule,\n    variables.turnOffTask,\n    source,\n    variables,\n    options,\n    \"–æ—Ç–∫–ª—é—á–µ–Ω–∏—è\"\n  );\n  variables.lastOffSchedule = offCronSchedule;\n\n  if (DEBUG) {\n    logInfo(`–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã cron –∑–∞–¥–∞—á–∏: –≤–∫–ª—é—á–µ–Ω–∏–µ - ${onCronSchedule || \"–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ\"}, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ - ${offCronSchedule || \"–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ\"}`);\n  }\n}\n\n/**\n * –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –æ–¥–Ω—É cron –∑–∞–¥–∞—á—É (–≤–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è)\n * @param {string|null} newSchedule - –Ω–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ cron\n * @param {string|null} lastSchedule - –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è\n * @param {Object|undefined} currentTask - —Ç–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –æ—Ç–º–µ–Ω—ã\n * @param {Object} source - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)\n * @param {Object} variables - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {string} taskType - —Ç–∏–ø –∑–∞–¥–∞—á–∏ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (\"–≤–∫–ª—é—á–µ–Ω–∏—è\" –∏–ª–∏ \"–æ—Ç–∫–ª—é—á–µ–Ω–∏—è\")\n * @returns {Object|undefined} –Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ undefined\n */\nfunction setupSingleCronTask(newSchedule, lastSchedule, currentTask, source, variables, options, taskType) {\n  // –û—Ç–º–µ–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–¥–∞—á—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å\n  if (lastSchedule !== newSchedule) {\n    cancelCronTask(currentTask);\n\n    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã —Å—Ç–∞—Ä–æ–π\n    if (newSchedule) {\n      return createCronTask(newSchedule, source, variables, options, taskType);\n    }\n    return undefined;\n  }\n\n  // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—ë –µ—â–µ –Ω–µ—Ç –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å\n  if (newSchedule && !currentTask) {\n    return createCronTask(newSchedule, source, variables, options, taskType);\n  }\n\n  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É, –µ—Å–ª–∏ –æ–Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç\n  return currentTask;\n}\n\n/**\n * –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç cron —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è (—Å–µ–∫—É–Ω–¥—ã –º–∏–Ω—É—Ç—ã —á–∞—Å—ã –¥–µ–Ω—å –º–µ—Å—è—Ü –¥–µ–Ω—å_–Ω–µ–¥–µ–ª–∏)\n * –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤—Ä–µ–º—è –¥–æ –º–∏–Ω—É—Ç (—Å–µ–∫—É–Ω–¥—ã = 0) –¥–ª—è –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è\n * @param {Date} date - –¥–∞—Ç–∞/–≤—Ä–µ–º—è\n * @returns {string|null} —Å—Ç—Ä–æ–∫–∞ cron —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–ª–∏ null\n */\nfunction getCronSchedule(date) {\n  if (!date) {\n    return null;\n  }\n\n  // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –¥–æ –º–∏–Ω—É—Ç (—Å–µ–∫—É–Ω–¥—ã = 0) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è\n  const minutes = date.getMinutes();\n  const hours = date.getHours();\n\n  // –§–æ—Ä–º–∞—Ç: —Å–µ–∫—É–Ω–¥—ã –º–∏–Ω—É—Ç—ã —á–∞—Å—ã * * * (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å)\n  // –°–µ–∫—É–Ω–¥—ã –≤—Å–µ–≥–¥–∞ 0 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏\n  return `0 ${minutes} ${hours} * * *`;\n}\n\n// ============================================================================\n// –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò\n// ============================================================================\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã\n * @param {*} coordinate - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏\n * @param {number} min - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ\n * @param {number} max - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ\n * @param {string} name - –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ\n * @returns {boolean} true –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –≤–∞–ª–∏–¥–Ω–∞\n */\nfunction isValidCoordinate(coordinate, min, max, name) {\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ undefined, null, –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É\n  if (coordinate === undefined || coordinate === null || coordinate === \"\") {\n    return false;\n  }\n\n  // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ\n  const num = typeof coordinate === 'string' ? parseFloat(coordinate) : Number(coordinate);\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ NaN –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —á–∏—Å–ª–∞\n  if (isNaN(num) || !isFinite(num)) {\n    return false;\n  }\n\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π\n  if (num < min || num > max) {\n    logError(name + \" –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç \" + min + \" –¥–æ \" + max + \" –≥—Ä–∞–¥—É—Å–æ–≤. –£–∫–∞–∑–∞–Ω–æ: \" + num);\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * –û–±–Ω–æ–≤–ª—è–µ—Ç –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–¥–µ–Ω—å/–Ω–æ—á—å)\n * @param {Object} source - –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–±—ã—Ç–∏—è (—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞)\n * @param {Object} options - –æ–ø—Ü–∏–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {boolean} shouldBeOn - —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–¥–µ–Ω—å/–Ω–æ—á—å)\n */\nfunction updateServiceName(source, options, shouldBeOn) {\n  // –ï—Å–ª–∏ –æ–ø—Ü–∏—è –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º\n  if (!options.changeServiceName) {\n    return;\n  }\n\n  try {\n    const service = source.getService();\n    if (!service) {\n      return;\n    }\n\n    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–¥–µ–Ω—å/–Ω–æ—á—å) –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–º—è\n    const stateStr = shouldBeOn ? \"–î–µ–Ω—å\" : \"–ù–æ—á—å\";\n    service.setName(stateStr);\n  } catch (error) {\n    logError(\"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞: \" + error);\n  }\n}\n\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ —Å–∞–º–∏–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º\n * –§–æ—Ä–º–∞—Ç context: \"LOGIC_ID <- C_TYPE <- LOGIC_ID\"\n * LOGIC[229_Service 508.13] <- C[508.13.15 Switch.On] <- LOGIC[229_Service 508.13] <- C[508.13.15 Switch.On] <- WEB[Apple Macintosh Chrome [DESKTOP] (–ª–æ–∫–∞–ª—å–Ω—ã–π) - 192.168.1.121]_1766321287\n * @param {Object} context - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\n * @returns {boolean} true –µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–º\n */\nfunction isSelfChanged(context) {\n  if (!context) return false;\n\n  const elements = context.toString().split(CONTEXT_CONSTANTS.DELIMITER);\n\n  return elements.length >= CONTEXT_CONSTANTS.MIN_ELEMENTS &&\n    elements[0].startsWith(CONTEXT_CONSTANTS.LOGIC_PREFIX) &&\n    elements[1].startsWith(CONTEXT_CONSTANTS.CHARACTERISTIC_PREFIX) &&\n    elements[2].split('_')[0] === elements[0].split('_')[0];\n}\n/**\n * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —Å—Ä–∞–±–æ—Ç–∞–ª –ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ö–∞–±–∞\n * @param {Object} context - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏\n * @returns {boolean} true –µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ\n */\nfunction isHubStartup(context) {\n  if (!context) return false;\n  return context && context.toString().indexOf(\"HUB[OnStart]\") >= 0;\n}\n\n// ============================================================================\n// –§–£–ù–ö–¶–ò–ò –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø\n// ============================================================================\n\n/**\n * –õ–æ–≥–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {string} message - —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è\n */\nfunction logInfo(message) {\n  console.info(LOG_PREFIX + message);\n}\n\n/**\n * –õ–æ–≥–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º —Å—Ü–µ–Ω–∞—Ä–∏—è\n * @param {string} message - —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è\n */\nfunction logError(message) {\n  console.error(LOG_PREFIX + message);\n}",
    "type": "LOGIC"
  }
}