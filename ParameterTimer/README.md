# ⏰ Параметр-Таймер
Логический сценарий

который автоматически отключает Boolean параметр через заданное количество секунд из Integer параметра.

## Описание функционала

Сценарий привязывается к сервису "Параметр" и реагирует на изменения характеристик:
- **C_Boolean** - параметр, который будет автоматически отключаться
- **C_Integer** - параметр с количеством секунд для таймера
- **C_Double** - дополнительная характеристика для отображения отсчёта (опционально)

## Принцип работы

1. **При включении Boolean параметра** (установка в `true`) запускается таймер на количество секунд, указанное в Integer параметре
2. **При изменении Integer параметра** во время работы таймера - таймер перезапускается с новым значением
3. **При изменении Boolean параметра** во время работы таймера:
   - Если Boolean становится `false` - таймер останавливается и восстанавливаются исходные значения
   - Если Boolean остается `true` - таймер перезапускается
4. **По истечении времени** Boolean параметр автоматически отключается (`false`) и восстанавливаются исходные значения

## Опции сценария

### Менять имя сервиса
Если включена, то имя сервиса показывает состояние таймера:
- **Исходное имя** - когда таймер выключен (Boolean = false)
- **Обратный отсчёт** - когда таймер активен (Boolean = true), показывает оставшиеся секунды

**Пример**: "Таймер лампочки" → "10 - Таймер лампочки" → "9 - Таймер лампочки" → ... → "Таймер лампочки"

## Особенности работы

### Автоматическое определение характеристик:
- **Если есть C_Double**: обратный отсчёт ведётся в C_Double
- **Если нет C_Double**: обратный отсчёт ведётся в C_Integer

### Логика работы:
- При изменении C_Integer значение автоматически устанавливается и в C_Double (если есть)
- При остановке таймера или изменении C_Integer в C_Double устанавливается то же значение
- В режиме покоя (таймер не активен) C_Double имеет значение больше 0 (исходное время)
- При завершении таймера Boolean выключается сразу, а значения восстанавливаются через 1 секунду

## Установка

1. Скопируйте файл `Параметр-Таймер.js` в папку `source/` вашего проекта
2. Скопируйте файл `Параметр-Таймер.json` в корневую папку проекта
3. Импортируйте сценарий в Sprut.Hub через интерфейс

## Использование

1. Создайте сервис "Параметр" в Sprut.Hub
2. Добавьте в него характеристики:
   - **C_Boolean** - для управления состоянием
   - **C_Integer** - для указания времени в секундах
   - **C_Double** - для отображения отсчёта (если используете эту опцию)
3. Примените логический сценарий "⏰ Параметр-Таймер" к этому сервису
4. Настройте опцию "Отображать отсчёт" по желанию
5. Установите желаемое время в Integer параметре (в секундах)
6. Включите Boolean параметр - запустится таймер
7. Опционально у устройства зайдите в настройки - Виртуальное устройство - Целое значение и установите минимальное и 
максимальное значение и шаг (количество секунд таймера), тогда можно будет устанавливать время ползунком

## Примеры использования

- **Таймер освещения**: Boolean - включение света, Integer - время работы в секундах
- **Таймер уведомлений**: Boolean - показ уведомления, Integer - время отображения
- **Таймер автоматического отключения**: Boolean - состояние устройства, Integer - время до отключения

## Требования

- Sprut.Hub с поддержкой логических сценариев
- Сервис типа "C_Option" с характеристиками "C_Boolean", "C_Integer" и опционально "C_Double"

## Версия

1.0 - Первая версия с базовой функциональностью таймера

## Автор

@BOOMikru
