{
  "scenarioTemplate": {
    "name": "üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π",
    "desc": "–í–∫–ª—é—á–∞–µ—Ç –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –¥–Ω–∏ –º–µ—Å—è—Ü–∞ –∏/–∏–ª–∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª–µ https://t.me/smart_sputnik",
    "active": true,
    "onStart": true,
    "sync": false,
    "data": "info = {\n  name: \"üìÖ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π\",\n  description: \"–í–∫–ª—é—á–∞–µ—Ç –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –¥–Ω–∏ –º–µ—Å—è—Ü–∞ –∏/–∏–ª–∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ –∫–∞–Ω–∞–ª–µ https://t.me/smart_sputnik\",\n  version: \"1.2\",\n  author: \"@BOOMikru\",\n  onStart: true,\n  sourceServices: [\n    HS.Switch, HS.Outlet, HS.Fan, HS.FanBasic, HS.Lightbulb,\n    HS.Faucet, HS.C_PetFeeder, HS.Valve, HS.HeaterCooler, HS.AirPurifier,\n    HS.IrrigationSystem, HS.Television, HS.HumidifierDehumidifier, HS.CameraControl\n  ],\n  sourceCharacteristics: [HC.On, HC.Active],\n\n  options: {\n    DaysOfMonth: {\n      name: {\n        en: \"Days of month\",\n        ru: \"–î–Ω–∏ –º–µ—Å—è—Ü–∞\"\n      },\n      desc: {\n        en: \"Days of the month to activate (e.g., '1', '15, 30' or '1-5').\\nActivation occurs on selected weekdays and specified days. If neither days nor weekdays are set, no activation happens.\",\n        ru: \"–ß–∏—Å–ª–∞ –º–µ—Å—è—Ü–∞ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, '1', '15, 30' –∏–ª–∏ '1-5').\\n–í–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ –∏ —É–∫–∞–∑–∞–Ω–Ω—ã–º —á–∏—Å–ª–∞–º. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å —á–∏—Å–ª–∞ –∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏, –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç.\"\n      },\n      type: \"String\",\n      value: \"\"\n    },\n    Monday: {\n      name: {\n        en: \"Every Monday\",\n        ru: \"–ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    Tuesday: {\n      name: {\n        en: \"Every Tuesday\",\n        ru: \"–ö–∞–∂–¥—ã–π –≤—Ç–æ—Ä–Ω–∏–∫\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    Wednesday: {\n      name: {\n        en: \"Every Wednesday\",\n        ru: \"–ö–∞–∂–¥—É—é —Å—Ä–µ–¥—É\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    Thursday: {\n      name: {\n        en: \"Every Thursday\",\n        ru: \"–ö–∞–∂–¥—ã–π —á–µ—Ç–≤–µ—Ä–≥\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    Friday: {\n      name: {\n        en: \"Every Friday\",\n        ru: \"–ö–∞–∂–¥—É—é –ø—è—Ç–Ω–∏—Ü—É\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    Saturday: {\n      name: {\n        en: \"Every Saturday\",\n        ru: \"–ö–∞–∂–¥—É—é —Å—É–±–±–æ—Ç—É\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    Sunday: {\n      name: {\n        en: \"Every Sunday\",\n        ru: \"–ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    ActiveMonths: {\n      name: {\n        en: \"Active months\",\n        ru: \"–ê–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Å—è—Ü—ã\"\n      },\n      desc: {\n        en: \"Months when the device should activate (e.g., '1', '1, 6, 12' or '6-8').\\nBy default every month.\",\n        ru: \"–ú–µ—Å—è—Ü—ã, –∫–æ–≥–¥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, '1', '1, 6, 12' –∏–ª–∏ '6-8').\\n–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü.\"\n      },\n      type: \"String\",\n      value: \"\"\n    },\n    Time: {\n      name: {\n        en: \"Time (HH:MM)\",\n        ru: \"–í—Ä–µ–º—è (–ß–ß:–ú–ú)\"\n      },\n      desc: {\n        en: \"Time when activation occurs. Midnight by default.\\nTime to turn on in 24-hour format. Restart the script via 'Active' toggle after changing.\",\n        ru: \"–í—Ä–µ–º—è, –≤ –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –≤–∫–ª—é—á–µ–Ω–∏–µ. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø–æ–ª–Ω–æ—á—å.\\n–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å '–ê–∫—Ç–∏–≤–Ω–æ'.\"\n      },\n      type: \"String\",\n      value: \"00:00\"\n    },\n    DontTurnOff: {\n      name: {\n        en: \"Don't turn off automatically\",\n        ru: \"–ù–µ –æ—Ç–∫–ª—é—á–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\"\n      },\n      desc: {\n        en: \"If enabled, the device will only turn on without automatic turning off.\",\n        ru: \"–ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∫–ª—é—á–∞—Ç—å—Å—è –±–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è.\"\n      },\n      type: \"Boolean\",\n      value: false\n    },\n    TurnOffTime: {\n      name: {\n        en: \"Turn off time (HH:MM)\",\n        ru: \"–í—Ä–µ–º—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è (–ß–ß:–ú–ú)\"\n      },\n      desc: {\n        en: \"Time to turn off the switch. Midnight by default.\\nIf turn-on and turn-off times match, it may not turn off if the next day meets the conditions.\\nWill not turn off if 'Don't turn off' is enabled.\",\n        ru: \"–í—Ä–µ–º—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–ª–Ω–æ—á—å.\\n–ï—Å–ª–∏ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞–µ—Ç, —Ç–æ –º–æ–∂–µ—Ç –Ω–µ –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è, –µ—Å–ª–∏ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å –ø–æ–¥—Ö–æ–¥–∏—Ç –ø–æ–¥ —É—Å–ª–æ–≤–∏—è.\\n–ù–µ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ '–ù–µ –æ—Ç–∫–ª—é—á–∞—Ç—å'.\"\n      },\n      type: \"String\",\n      value: \"00:00\"\n    },\n    TurnOffDelay: {\n      name: {\n        en: \"Turn off delay (seconds)\",\n        ru: \"–í—ã–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ (—Å–µ–∫—É–Ω–¥—ã)\"\n      },\n      desc: {\n        en: \"Delay in seconds before turning off after activation. Set to 0 to disable automatic turn-off.\\nWill not turn off if 'Don't turn off' is enabled.\",\n        ru: \"–ü–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—É–Ω–¥. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ 0, —á—Ç–æ–±—ã –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ.\\n–ù–µ –æ—Ç–∫–ª—é—á–∏—Ç—Å—è, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ '–ù–µ –æ—Ç–∫–ª—é—á–∞—Ç—å'.\"\n      },\n      type: \"Integer\",\n      value: 0\n    },\n    Invert: {\n      name: {\n        en: \"Invert\",\n        ru: \"–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ\"\n      },\n      desc: {\n        en: \"Instead of turning on it will turn off, and instead of turning off it will turn on\",\n        ru: \"–í–º–µ—Å—Ç–æ –≤–∫–ª—é—á–µ–Ω–∏—è –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–∞—Ç—å—Å—è, –∞ –≤–º–µ—Å—Ç–æ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è - –≤–∫–ª—é—á–∞—Ç—å—Å—è\"\n      },\n      type: \"Boolean\",\n      value: false\n    }\n  },\n  variables: {\n    cronTask: undefined, // –ó–∞–¥–∞—á–∞ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è\n    midnightTask: undefined, // –ó–∞–¥–∞—á–∞ –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ –≤ –ø–æ–ª–Ω–æ—á—å\n    prevTime: undefined, // –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ options.Time\n    prevTurnOffTime: undefined // –ü—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ options.TurnOffTime\n  }\n}\n\nfunction trigger(source, value, variables, options, context) {\n  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –ª–∏ –≤—Ä–µ–º—è –≤–∫–ª—é—á–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö\n  if (variables.prevTime !== options.Time || variables.prevTurnOffTime !== options.TurnOffTime) {\n    if (variables.cronTask) {\n      variables.cronTask.clear();\n      variables.cronTask = undefined;\n    }\n    if (variables.midnightTask) {\n      variables.midnightTask.clear();\n      variables.midnightTask = undefined;\n    }\n    variables.prevTime = options.Time; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤–∫–ª—é—á–µ–Ω–∏—è\n    variables.prevTurnOffTime = options.TurnOffTime; // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è\n  }\n\n  // –ï—Å–ª–∏ –∑–∞–¥–∞—á–∏ —É–∂–µ –∑–∞–ø—É—â–µ–Ω—ã, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º\n  if (variables.cronTask) return;\n\n  let timeObj = perseTime(options.Time)\n  let time = timeObj.time\n  let hoursStr = timeObj.hoursStr\n  let minutesStr = timeObj.minutesStr\n\n  let timeOffObj = perseTime(options.TurnOffTime)\n  let turnOffTime = timeOffObj.time\n  let turnOffHoursStr = timeOffObj.hoursStr\n  let turnOffMinutesStr = timeOffObj.minutesStr\n\n  // –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–Ω–µ–π –º–µ—Å—è—Ü–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤\n  var daysOfMonth = parseRange(options.DaysOfMonth);\n  daysOfMonth = daysOfMonth.filter(function (day) {\n    if (day >= 1 && day <= 31) {\n      return true;\n    } else {\n      console.warn(\"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —á–∏—Å–ª–æ –º–µ—Å—è—Ü–∞ \\\"\" + day + \"\\\" (–¥–æ–ø—É—Å—Ç–∏–º—ã: 1-31), –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ\");\n      return false;\n    }\n  });\n\n  // –í–∞–ª–∏–¥–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤\n  var activeMonths = parseRange(options.ActiveMonths);\n  activeMonths = activeMonths.filter(function (month) {\n    if (month >= 1 && month <= 12) {\n      return true;\n    } else {\n      console.warn(\"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞ \\\"\" + month + \"\\\" (–¥–æ–ø—É—Å—Ç–∏–º—ã: 1-12), –±—É–¥–µ—Ç –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ\");\n      return false;\n    }\n  });\n  if (activeMonths.length === 0) {\n    //console.warn(\"–ù–µ—Ç –≤–∞–ª–∏–¥–Ω—ã—Ö –º–µ—Å—è—Ü–µ–≤ –≤ \\\"\" + options.ActiveMonths + \"\\\", –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å–µ –º–µ—Å—è—Ü—ã (1-12)\");\n    activeMonths = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];\n  }\n\n  // –ü–∞—Ä—Å–∏–º –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏\n  var daysOfWeek = [\n    options.Sunday, options.Monday, options.Tuesday, options.Wednesday,\n    options.Thursday, options.Friday, options.Saturday\n  ];\n\n  let setNewValue = function () {\n    let now = new Date();\n    let month = now.getMonth() + 1; // getMonth() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0-11, –¥–æ–±–∞–≤–ª—è–µ–º 1 –¥–ª—è 1-12\n    let dayOfMonth = now.getDate();\n    let dayOfWeek = now.getDay(); // 0 - –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ, 1 - –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫, ..., 6 - —Å—É–±–±–æ—Ç–∞\n\n    let isMonthMatch = activeMonths.indexOf(month) !== -1;\n    let isDayOfMonthMatch = daysOfMonth.length > 0 && daysOfMonth.indexOf(dayOfMonth) !== -1;\n    let isDayOfWeekMatch = daysOfWeek[dayOfWeek];\n\n    // –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –º–µ—Å—è—Ü—ã, –Ω–æ –Ω–µ—Ç –Ω–∏ –¥–Ω–µ–π –º–µ—Å—è—Ü–∞, –Ω–∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏, –≤–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç\n    if (isMonthMatch && (isDayOfMonthMatch || isDayOfWeekMatch)) {\n      setDeviceValue(source, true, options.Invert);\n      //console.info(\"–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–∫–ª—é—á–µ–Ω–æ –≤ \" + time + \" –¥–ª—è –º–µ—Å—è—Ü–∞ \" + month + \", –¥–Ω—è \" + dayOfMonth + \", –¥–Ω—è –Ω–µ–¥–µ–ª–∏ \" + dayOfWeek);\n\n      // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å —É—á—ë—Ç–æ–º TurnOffDelay, –µ—Å–ª–∏ –Ω–µ DontTurnOff –∏ TurnOffDelay > 0\n      if (options.TurnOffDelay > 0 && !options.DontTurnOff) {\n        setTimeout(function () {\n          setDeviceValue(source, false, options.Invert);\n         // console.info(\"–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª—é—á–µ–Ω–æ —á–µ—Ä–µ–∑ \" + options.TurnOffDelay + \" —Å–µ–∫—É–Ω–¥ –≤ \" + time);\n        }, options.TurnOffDelay * 1000);\n      }\n    } else if (!options.DontTurnOff) {\n      setDeviceValue(source, false, options.Invert);\n      //console.info(\"–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ \" + time + \" - —É—Å–ª–æ–≤–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç (–º–µ—Å—è—Ü: \" + month + \", –¥–µ–Ω—å: \" + dayOfMonth + \", –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ \" + dayOfWeek + \")\");\n    }\n  }\n\n  //console.info(\"–ö—Ä–æ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∑–Ω–∞–ø—É—â–µ–Ω –Ω–∞ {}\", \"0 \" + minutesStr + \" \" + hoursStr + \" * * *\")\n  // –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞: –≤–∫–ª—é—á–µ–Ω–∏–µ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è\n  variables.cronTask = Cron.schedule(\"0 \" + minutesStr + \" \" + hoursStr + \" * * *\", setNewValue);\n\n  // –ó–∞–¥–∞—á–∞ –Ω–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑—É–µ–º TurnOffTime, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–æ, –∏–Ω–∞—á–µ –ø–æ–ª–Ω–æ—á—å (–µ—Å–ª–∏ –Ω–µ DontTurnOff)\n  if (!options.DontTurnOff && time != turnOffTime) {\n    var offSchedule = (turnOffTime === \"00:00\" && options.TurnOffTime === \"\") ? \"0 0 0 * * *\" : \"0 \" + turnOffMinutesStr + \" \" + turnOffHoursStr + \" * * *\";\n    //console.info(\"–ö—Ä–æ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –Ω–∞ –≤—ã–∫–ª –∑–Ω–∞–ø—É—â–µ–Ω –Ω–∞ {}\", offSchedule)\n    variables.midnightTask = Cron.schedule(offSchedule, function () {\n      setDeviceValue(source, false, options.Invert);\n     // console.info(\"–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–∫–ª—é—á–µ–Ω–æ –≤ \" + turnOffTime);\n    });\n  } else {\n    //console.info(\"–ö—Ä–æ–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –Ω–∞ –≤—ã–∫–ª –ù–ï –∑–Ω–∞–ø—É—â–µ–Ω\")\n  }\n}\n\nfunction setDeviceValue(source, value, invert) {\n  var isOnCharacteristic = source.getType() == HC.On;\n  var isActiveCharacteristic = source.getType() == HC.Active;\n  if (invert) value = !value\n  if (isOnCharacteristic) {\n    source.setValue(value);\n  } else if (isActiveCharacteristic) {\n    source.setValue(value ? 1 : 0);\n  }\n}\n\nfunction parseRange(str) {\n  var result = [];\n  if (!str) return result; // –ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ –ø—É—Å—Ç–∞—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤\n  str.replace(/\\s/g, \"\").split(/[,;]/).forEach(function (part) {\n    var range = part.split('-');\n    if (range.length === 2) {\n      var start = parseInt(range[0], 10);\n      var end = parseInt(range[1], 10);\n      if (start && end && start <= end) {\n        for (var i = start; i <= end; i++) result.push(i);\n      }\n    } else {\n      var num = parseInt(part, 10);\n      if (num) result.push(num);\n    }\n  });\n  return result.filter(function (num) { return num; });\n}\n\nfunction perseTime(str) {\n  // –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤–∫–ª—é—á–µ–Ω–∏—è (Time)\n  var time = str || \"\"; // –ï—Å–ª–∏ undefined, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É\n  var hours, minutes;\n  var timeMatch = time.match(/^(\\d{1,2}):(\\d{1,2})$/); // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–µ–∑ –≤–µ–¥—É—â–µ–≥–æ –Ω—É–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, \"5:30\")\n  if (timeMatch) {\n    hours = parseInt(timeMatch[1], 10);\n    minutes = parseInt(timeMatch[2], 10);\n    if (hours < 0 || hours > 23 || minutes < 0 || minutes > 59) {\n      console.warn(\"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—Ä–µ–º—è \\\"\" + time + \"\\\" (—á–∞—Å—ã: 0-23, –º–∏–Ω—É—Ç—ã: 0-59), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è \\\"00:00\\\"\");\n      hours = 0;\n      minutes = 0;\n    }\n  } else {\n    console.warn(\"–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ \\\"\" + time + \"\\\", –æ–∂–∏–¥–∞–µ—Ç—Å—è –ß–ß:–ú–ú, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è \\\"00:00\\\"\");\n    hours = 0;\n    minutes = 0;\n  }\n  var hoursStr = hours < 10 ? \"0\" + hours : \"\" + hours;\n  var minutesStr = minutes < 10 ? \"0\" + minutes : \"\" + minutes;\n  time = hoursStr + \":\" + minutesStr; // –§–æ—Ä–º–∞—Ç \"–ß–ß:–ú–ú\"\n  return {\n    time: time,\n    hoursStr: hoursStr,\n    minutesStr: minutesStr\n  }\n}",
    "type": "LOGIC"
  }
}