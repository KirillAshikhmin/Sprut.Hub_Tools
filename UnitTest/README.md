# Unit тесты
# Глобальный сценарий

От программиста для программистов!

Повышаем качество кода. Встроенного механизма тестирования в СХ нет, но хочется проверять надёжность своих сценариев. Но вот, если у сценария включено "Выполнять при старте хаба", то при сохранении сценарий выполняется. Соответственно можно написать функцию с тестами, которую тут же вызывать и проверять свою логику при каждом сохранении сценария. А теперь это стало ещё проще.

Импортируйте данный сценарий, далее зайдите в него и из конца скопируйте часть функцию runTests до "// #############" себе в сценарий, а после функции вызовите эту же функцию runTests().
А в самой функции уже проверяйте всё что надо через всевозможные assert функции.

Но, сценарии они же не в вакууме, а для управления устройствами. Но не гонять же тесты на реальных, нужны мок-аксессуары.
Для этого созданы функции: 
```
createUnitTestRoom
createUnitTestAccessory
createUnitTestService
createUnitTestCharacteristic
```

И царь функция - 
`createUnitTestFullAccessory`
в неё передаётся описание своего устройства, например:
```
let lampAcc = {
  id: 1,
  name: "Лампочка",
  room: "Тест",
  services: [
    {
      type: HS.Lightbulb,
      name: "Лампочка"
      characteristics: [
        {
          type: HC.On,
          value: true
        },
        {
          type: HC.Brightness,
          value: 100
        },
        {
          type: HC.ColorTemperature,
          value: 400
        }
      ]
    }
  ]
}
```

И на выходе функции появляется объект, который аналогичен по доступным функциям типу Accessory со всеми сервисами, характеристиками и тд и его можно передавать в свои функции, а после их выполнения првоерять установленные значения через assert.
